{const e=this,{window:t}=e,n="expose",l="injectInto",o="runAt",a="scripts",s=e=>"function"==typeof e,{Boolean:i,Error:r,Object:c,Promise:u,chrome:d,performance:p}=e,{apply:m}=Reflect,h=m.call.bind({}.hasOwnProperty),g=c.call.bind(c.call),f=!d.app,v="#"+a,w=(d.runtime.getURL("/").slice(0,-1),d.runtime.getManifest());d.runtime.getURL(w.options_ui.page),d.runtime.getURL(w.icons[16].replace("16.png","")),(()=>{var a,m,b,y={8993:(a,r,m)=>{"use strict";function b(e,t){if(null==e)return{};var n,l,o={},a=c.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(o[n]=e[n]);return o}m.d(r,{m:()=>hr}),m(2993);var y=m(3293),x=m(287),C=m(3057),k=m(4017),_=m(6522),S=(m(537),m(5517),m(2262)),z=m(8292);const D=(0,S.qj)({route:z.BC,scripts:[],removedScripts:[],importing:null,loading:!1,needRefresh:!1,storageSize:0,sync:[],title:null});var U=m(6252),$=m(2502);const R={class:"page-options"},E={key:0},I={class:"aside-content"},V=(0,U._)("img",{src:"/public/images/icon128.png"},null,-1),j=["textContent"],W=(0,U._)("hr",null,null,-1),T=["href","data-num-scripts","textContent"];var O=m(8250),L=m(9963);const M={class:"tab-installed",ref:"scroller"},A={key:0},Z={class:"flex"},H={key:0,class:"flex-auto"},P={class:"btn-ghost",tabindex:"0"},N=["textContent"],B=["textContent"],F=["textContent"],Y=["textContent"],q=["textContent"],K={class:"btn-ghost",tabindex:"0"},J=["value"],G=["textContent","value"],Q={class:"mr-2c"},X=["placeholder"],ee=["textContent"],te=["textContent"],ne=["textContent"],le=["textContent"],oe={key:0,class:"hint mx-1 my-1 flex flex-col"},ae=["textContent"],se=["textContent"],ie=["textContent"],re=["data-columns","data-show-order","data-table"];var ce=m(1036),ue=m(5310),de=m(9772),pe=m(7025),me=m(8694),he=m(6930),ge=m(2770);const fe=".script",ve="ontouchstart"in document,we=ve?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},be=ve&&c.assign(document.createElement("div"),{className:"dragging-noscroll"}),ye=["scroll","mouseenter","mouseleave"],{addEventListener:xe,removeEventListener:Ce}=EventTarget.prototype;let ke,_e,Se,ze,De,Ue,$e,Re,Ee,Ie,Ve,je,We,Te,Oe,Le,Me,Ae;function Ze(e,t,n){Ve=e,je=t,g(n?xe:Ce,Ve,we.start,ve?He:Be)}function He(e){tt(e)&&(Ue=e,$e=setTimeout(Pe,500,"timer"),g(xe,document,we.move,Pe),g(xe,document,we.end,Ne))}function Pe(e){Ne(),"timer"===e&&(g(Be,Ie,Ue),f&&Ke()&&(Ve.scrollTop+=1,Ve.scrollTop-=1))}function Ne(){clearTimeout($e),g(Ce,document,we.move,Pe),g(Ce,document,we.end,Ne)}function Be(e){var t;if(!tt(e))return;e.cancelable&&e.preventDefault();const{clientX:n,clientY:l}=(null==(t=e.touches)?void 0:t[0])||e,o=Ie.getBoundingClientRect(),a=Ve.getBoundingClientRect();ke=Ie.cloneNode(!0),_e=g([].filter,Ve.children,e=>"none"!==e.style.display),ze=_e.indexOf(Ie),De=ze,_e.splice(ze,1),Se=o.height,Re=n-o.left,Ee=l-o.top,We=a.top+50,Te=a.bottom-50,Ae={},Ie.classList.add("dragging-placeholder"),ke.classList.add("dragging"),ke.style.transform=`translate(${o.left}px, ${o.top}px)`,ke.style.width=`${o.width}px`,Ve.appendChild(ke),ve&&Ve.insertAdjacentElement("afterBegin",be),g(xe,document,we.move,Fe),g(xe,document,we.end,Ye)}function Fe(e){var t;const{clientX:n,clientY:l,target:o}=(null==(t=e.touches)?void 0:t[0])||e;let a;const s=ve?et(n,l):null==o.closest?void 0:o.closest(fe);if(s&&s!==Ie){const e=s.getBoundingClientRect(),t=l>e.top+e.height/2;a=Ie!==s[(t?"next":"previous")+"ElementSibling"],a&&(s.insertAdjacentElement(t?"afterEnd":"beforeBegin",Ie),qe(_e.indexOf(s)+t))}ke.style.transform=`translate(${n-Re}px, ${l-Ee}px)`,(Je(l)||a)&&(Ae={})}function Ye(){g(Ce,document,we.move,Fe),g(Ce,document,we.end,Ye),Qe(),ke.remove(),ve&&be.remove(),Ie.classList.remove("dragging-placeholder"),je(ze,De)}function qe(e){const t=De<e?Se:-Se,n=_e.slice(...De<e?[De,e]:[e,De]);n.forEach(e=>{e.style.transition="none",e.style.transform=`translateY(${t}px)`}),setTimeout(()=>n.forEach(({style:e})=>{e.removeProperty("transition"),e.removeProperty("transform")})),De=e}function Ke(){return Ve.scrollHeight>Ve.clientHeight}function Je(e){const n=Ke()&&Math.min(1,Math.max(0,e-Te,We-e)/50);return!n&&Oe&&Qe(),n&&!Oe&&(Oe=setInterval(Ge,16),ye.forEach(e=>g(xe,t,e,Xe,!0))),Le=n&&(e>Te?1:-1)*(1+20*n|0),Me=p.now(),!!n}function Ge(){const e=p.now(),t=Le*(e-Me)/16;Ve.scrollTop+=t,Me=e}function Qe(){ye.forEach(e=>g(Ce,t,e,Xe,!0)),Oe&&clearInterval(Oe),Oe=0}function Xe(e){e.stopPropagation()}function et(e,t){var n;const l=`${e}:${t}`;return Ae[l]||(Ae[l]=null==(n=document.elementFromPoint(e,t))?void 0:n.closest(fe))}function tt(e){return Ie=e.target.closest(fe),Ie}const nt=["tabIndex"],lt={class:"script-icon hidden-xs"},ot=["href","data-hotkey"],at=["src","data-no-icon"],st=["textContent","data-order"],it={class:"script-info flex ml-1c"},rt=["href","textContent","tabIndex"],ct=["textContent"],ut=["textContent"],dt={class:"script-buttons script-buttons-left"},pt=["href","data-hotkey","tabIndex"],mt=["data-hotkey","tabIndex"],ht=["data-hotkey","tabIndex"],gt=(0,U._)("span",{class:"sep"},null,-1),ft=["tabIndex"],vt=["href","tabIndex"],wt=["textContent","title"],bt={class:"script-buttons script-buttons-right"},yt=["data-hotkey","tabIndex"],xt=["data-hotkey","tabIndex"],Ct={props:["script","visible","viewTable","focused","hotkeys","showHotkeys"],components:{Icon:he.Z,Tooltip:pe.Z},data(){return{canRender:this.visible}},computed:{showRecycle:()=>"recycleBin"===D.route.paths[0],canUpdate(){return(0,y.TZ)(this.script)},author(){const e=this.script.meta.author;if(!e)return;const t=e.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:t&&t[2],name:t?t[1]:e}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||(0,y.iQ)(this.script.meta,"description")},updatedAt(){const{props:e,config:t}=this.script,n={};let l;if(t.removed?({lastModified:l}=e):l=e.lastUpdated||e.lastModified,l){const e=new Date(l);n.show=(0,y.mr)(Date.now()-l),t.removed?n.title=this.i18n("labelRemovedAt",e.toLocaleString()):n.title=this.i18n("labelLastUpdatedAt",e.toLocaleString())}return n},tabIndex(){return this.focused?0:-1},url(){return`${this.script.config.removed?"#recycleBin":v}/${this.script.props.id}`},urls(){return{home:[(0,y.ag)("buttonHome"),(0,y.t$)(this.script)],question:[(0,y.ag)("buttonSupport"),(0,y.b7)(this.script)]}}},watch:{visible(e){e&&(this.canRender=!0)},focused(e,t){const{$el:n}=this;if(e&&!t&&n){const e=n.getBoundingClientRect(),t=n.parentNode.getBoundingClientRect();let l=0;e.bottom>t.bottom-8?l+=e.bottom-t.bottom+8:e.top<t.top+8&&(l-=t.top-e.top+8),(0,O.u7)(document.activeElement)||n.focus({preventScroll:!0}),this.$emit("scrollDelta",l)}}},methods:{onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){O.$J.setContext("scriptFocus",!0)},onBlur(){O.$J.setContext("scriptFocus",!1)},toggleTip(e){(0,O.xr)(e.target)}}};var kt=m(3744);const _t=(0,kt.Z)(Ct,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("icon"),i=(0,U.up)("tooltip");return(0,U.wg)(),(0,U.iD)("div",{class:(0,$.C_)(["script",{disabled:!n.script.config.enabled,removed:n.script.config.removed,error:n.script.error,focused:n.focused,hotkeys:n.focused&&n.showHotkeys}]),tabIndex:a.tabIndex,onFocus:t[5]||(t[5]=(...e)=>a.onFocus&&a.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>a.onBlur&&a.onBlur(...e))},[(0,U._)("div",lt,[(0,U._)("a",{href:a.url,"data-hotkey":n.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},[(0,U._)("img",{src:n.script.safeIcon,"data-no-icon":n.script.noIcon},null,8,at)],8,ot)]),(0,U._)("a",(0,U.dG)({class:"script-name ellipsis",textContent:(0,$.zw)(n.script.$cache.name)},n.viewTable&&{draggable:!1,href:a.url,tabIndex:a.tabIndex},{"data-order":n.script.config.removed?null:n.script.props.position}),null,16,st),(0,U._)("div",it,[o.canRender?((0,U.wg)(),(0,U.iD)(U.HY,{key:0},[a.author?((0,U.wg)(),(0,U.j4)(i,{key:0,content:e.i18n("labelAuthor")+n.script.meta.author,class:"script-author ml-1c hidden-sm",align:"end"},{default:(0,U.w5)(()=>[(0,U.Wm)(s,{name:"author"}),a.author.email?((0,U.wg)(),(0,U.iD)("a",{key:0,class:"ellipsis",href:`mailto:${a.author.email}`,textContent:(0,$.zw)(a.author.name),tabIndex:a.tabIndex},null,8,rt)):((0,U.wg)(),(0,U.iD)("span",{key:1,class:"ellipsis",textContent:(0,$.zw)(a.author.name)},null,8,ct))]),_:1},8,["content"])):(0,U.kq)("",!0),(0,U._)("span",{class:"version ellipsis",textContent:(0,$.zw)(n.script.meta.version)},null,8,ut),n.script.config.removed?(0,U.kq)("",!0):((0,U.wg)(),(0,U.j4)(i,{key:1,class:"size hidden-sm",content:n.script.$cache.sizes,align:"end"},{default:(0,U.w5)(()=>[(0,U.Uk)((0,$.zw)(n.script.$cache.size),1)]),_:1},8,["content"])),(0,U.Wm)(i,{class:"updated hidden-sm ml-1c",content:a.updatedAt.title,align:"end"},{default:(0,U.w5)(()=>[(0,U.Uk)((0,$.zw)(a.updatedAt.show),1)]),_:1},8,["content"])],64)):(0,U.kq)("",!0)]),(0,U._)("div",dt,[o.canRender?((0,U.wg)(),(0,U.iD)(U.HY,{key:0},[(0,U.Wm)(i,{content:e.i18n("buttonEdit"),align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",href:a.url,"data-hotkey":n.hotkeys.edit,tabIndex:a.tabIndex},[(0,U.Wm)(s,{name:"code"})],8,pt)]),_:1},8,["content"]),n.script.config.removed?(0,U.kq)("",!0):((0,U.wg)(),(0,U.iD)(U.HY,{key:0},[(0,U.Wm)(i,{content:a.labelEnable,align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",onClick:t[0]||(t[0]=(...e)=>a.onToggle&&a.onToggle(...e)),"data-hotkey":n.hotkeys.toggle,tabIndex:a.tabIndex},[(0,U.Wm)(s,{name:"toggle-"+(n.script.config.enabled?"on":"off")},null,8,["name"])],8,mt)]),_:1},8,["content"]),(0,U.Wm)(i,{disabled:!a.canUpdate||n.script.checking,content:e.i18n("buttonCheckForUpdates"),align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",onClick:t[1]||(t[1]=(...e)=>a.onUpdate&&a.onUpdate(...e)),"data-hotkey":n.hotkeys.update,tabIndex:a.canUpdate?a.tabIndex:-1},[(0,U.Wm)(s,{name:"refresh"})],8,ht)]),_:1},8,["disabled","content"])],64)),gt,(0,U.Wm)(i,{disabled:!a.description,content:a.description,align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",tabIndex:a.description?a.tabIndex:-1,onClick:t[2]||(t[2]=(...e)=>a.toggleTip&&a.toggleTip(...e))},[(0,U.Wm)(s,{name:"info"})],8,ft)]),_:1},8,["disabled","content"]),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(a.urls,([e,t],n)=>((0,U.wg)(),(0,U.j4)(i,{key:n,disabled:!t,content:e,align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",target:"_blank",rel:"noopener noreferrer",href:t,tabIndex:t?a.tabIndex:-1},[(0,U.Wm)(s,{name:n},null,8,["name"])],8,vt)]),_:2},1032,["disabled","content"]))),128)),n.script.message?((0,U.wg)(),(0,U.iD)("div",{key:1,class:"script-message",textContent:(0,$.zw)(n.script.message),title:n.script.error},null,8,wt)):(0,U.kq)("",!0)],64)):(0,U.kq)("",!0)]),(0,U._)("div",bt,[o.canRender?((0,U.wg)(),(0,U.iD)(U.HY,{key:0},[a.showRecycle||!n.script.config.removed?((0,U.wg)(),(0,U.j4)(i,{key:0,content:e.i18n("buttonRemove"),align:"end"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:(0,$.C_)(["btn-ghost",{"btn-danger":n.script.config.removed}]),onClick:t[3]||(t[3]=(...e)=>a.onRemove&&a.onRemove(...e)),"data-hotkey":n.hotkeys.remove,tabIndex:a.tabIndex},[(0,U.Wm)(s,{name:"trash"})],10,yt)]),_:1},8,["content"])):(0,U.kq)("",!0),n.script.config.removed?((0,U.wg)(),(0,U.j4)(i,{key:1,content:e.i18n("buttonRestore"),placement:"left"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",onClick:t[4]||(t[4]=(...e)=>a.onRestore&&a.onRestore(...e)),"data-hotkey":n.hotkeys.restore,tabIndex:a.tabIndex},[(0,U.Wm)(s,{name:"undo"})],8,xt)]),_:1},8,["content"])):(0,U.kq)("",!0)],64)):(0,U.kq)("",!0)])],42,nt)}]]),St=_t,zt={class:"edit frame flex flex-col abs-full"},Dt={class:"edit-header flex mr-1c"},Ut=["textContent","onClick"],$t={class:"edit-name text-center ellipsis flex-1"},Rt=["textContent"],Et={class:"edit-hint text-right ellipsis"},It=["textContent"],Vt={class:"edit-buttons"},jt=["textContent","disabled","title"],Wt=["textContent","disabled"],Tt=["textContent"],Ot={key:1,class:"errors my-1c"},Lt=["textContent"],Mt={class:"my-1"},At=["href","textContent"];var Zt=m(7462),Ht=m(1181),Pt=m(9727);const Nt={class:"edit-settings",ref:"container"},Bt=["textContent"],Ft={class:"form-group condensed"},Yt=["disabled"],qt=["textContent"],Kt=["textContent"],Jt=["value","disabled"],Gt=["textContent"],Qt=["textContent"],Xt=(0,U._)("td",null,[(0,U._)("code",null,"@run-at")],-1),en=["textContent"],tn=["disabled"],nn=["textContent"],ln=(0,U._)("option",{value:"document-start"},"document-start",-1),on=(0,U._)("option",{value:"document-body"},"document-body",-1),an=(0,U._)("option",{value:"document-end"},"document-end",-1),sn=(0,U._)("option",{value:"document-idle"},"document-idle",-1),rn=(0,U._)("td",null,[(0,U._)("code",null,[(0,U.Uk)("@"),(0,U._)("s",{style:{color:"var(--fill-6)"}},"no"),(0,U.Uk)("frames")])],-1),cn=["textContent"],un=["disabled"],dn=["textContent"],pn=["textContent"],mn=["textContent"],hn=(0,U._)("td",null,[(0,U._)("code",null,"@inject-into")],-1),gn=["textContent"],fn=["disabled"],vn=["textContent"],wn=["textContent"],bn=["textContent"],yn=["textContent"],xn=["onUpdate:modelValue","placeholder","disabled"],Cn=["textContent"],kn=["textContent"],_n=["textContent"],Sn=["onUpdate:modelValue","disabled"],zn=["textContent"],Dn=["onUpdate:modelValue","rows","disabled"];var Un=m(432);const $n=e=>{var t;return(null==(t=e.match(/^(.*?)(@[-a-z]+)(.*)/))?void 0:t.slice(1))||[e,"",""]},Rn={props:["active","settings","value","readOnly"],data:()=>({KII:Un.Wg}),computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:e}=this;return{name:(0,ue._M)(e,"meta.name"),homepageURL:(0,y.t$)(e),updateURL:(0,ue._M)(e,"meta.updateURL")||(0,y.ag)("hintUseDownloadURL"),downloadURL:(0,ue._M)(e,"meta.downloadURL")||(0,ue._M)(e,"custom.lastInstallURL")}},textInputs:()=>[["name",(0,y.ag)("labelName")],["homepageURL",(0,y.ag)("labelHomepageURL")],["updateURL",(0,y.ag)("labelUpdateURL")],["downloadURL",(0,y.ag)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",...$n((0,y.ag)("labelInclude"))],["match","origMatch",...$n((0,y.ag)("labelMatch"))],["exclude","origExclude",...$n((0,y.ag)("labelExclude"))],["excludeMatch","origExcludeMatch",...$n((0,y.ag)("labelExcludeMatch"))]]},watch:{active(e){e&&(0,_.wO)(this.$el)}}},En=(0,kt.Z)(Rn,[["render",(e,t,n,l,o,a)=>((0,U.wg)(),(0,U.iD)("div",Nt,[(0,U._)("h4",{textContent:(0,$.zw)(e.i18n("editLabelSettings"))},null,8,Bt),(0,U._)("div",Ft,[(0,U._)("label",null,[(0,U.wy)((0,U._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>a.config.shouldUpdate=e),disabled:n.readOnly},null,8,Yt),[[L.e8,a.config.shouldUpdate]]),(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelAllowUpdate"))},null,8,qt)]),(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelNotifyThisUpdated"))},null,8,Kt),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)([[e.i18n("genericOn"),"1"],[e.i18n("genericOff"),"0"],[e.i18n("genericUseGlobal"),""]],([e,l])=>((0,U.wg)(),(0,U.iD)("label",{class:"ml-1",key:l},[(0,U.wy)((0,U._)("input",{type:"radio",value:l,"onUpdate:modelValue":t[1]||(t[1]=e=>a.config.notifyUpdates=e),disabled:n.readOnly},null,8,Jt),[[L.G2,a.config.notifyUpdates]]),(0,U.Uk)(),(0,U._)("span",{textContent:(0,$.zw)(e)},null,8,Gt)]))),128))]),(0,U._)("h4",{textContent:(0,$.zw)(e.i18n("editLabelMeta"))},null,8,Qt),(0,U._)("table",null,[(0,U._)("tr",null,[Xt,(0,U._)("td",null,[(0,U._)("p",{textContent:(0,$.zw)(e.i18n("labelRunAt"))},null,8,en)]),(0,U._)("td",null,[(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.custom.runAt=e),disabled:n.readOnly},[(0,U._)("option",{value:"",textContent:(0,$.zw)(e.i18n("labelRunAtDefault"))},null,8,nn),ln,on,an,sn],8,tn),[[L.bM,a.custom.runAt]])])]),(0,U._)("tr",null,[rn,(0,U._)("td",null,[(0,U._)("p",{textContent:(0,$.zw)(e.i18n("labelNoFrames"))},null,8,cn)]),(0,U._)("td",null,[(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.custom.noframes=e),disabled:n.readOnly},[(0,U._)("option",{value:"",textContent:(0,$.zw)(e.i18n("labelRunAtDefault"))},null,8,dn),(0,U._)("option",{value:"0",textContent:(0,$.zw)(e.i18n("genericOn"))},null,8,pn),(0,U._)("option",{value:"1",textContent:(0,$.zw)(e.i18n("genericOff"))},null,8,mn)],8,un),[[L.bM,a.custom.noframes]])])]),(0,U._)("tr",null,[hn,(0,U._)("td",null,[(0,U._)("p",{textContent:(0,$.zw)(e.i18n("labelInjectionMode"))},null,8,gn)]),(0,U._)("td",null,[(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.custom.injectInto=e),disabled:n.readOnly},[(0,U._)("option",{value:"",textContent:(0,$.zw)(e.i18n("labelRunAtDefault"))},null,8,vn),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(o.KII,(e,t)=>((0,U.wg)(),(0,U.iD)("option",{key:t,textContent:(0,$.zw)(t)},null,8,wn))),128))],8,fn),[[L.bM,a.custom.injectInto]])])]),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(a.textInputs,([e,t])=>((0,U.wg)(),(0,U.iD)("tr",{key:e},[(0,U._)("td",null,[(0,U._)("code",{textContent:(0,$.zw)(`@${e}`)},null,8,bn)]),(0,U._)("td",null,[(0,U._)("p",{textContent:(0,$.zw)(t)},null,8,yn)]),(0,U._)("td",null,[(0,U.wy)((0,U._)("input",{type:"text","onUpdate:modelValue":t=>a.custom[e]=t,placeholder:a.placeholders[e],disabled:n.readOnly},null,8,xn),[[L.nr,a.custom[e]]])])]))),128))]),(0,U._)("table",null,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(a.textAreas,([t,l,o,s,i])=>((0,U.wg)(),(0,U.iD)("tr",{key:t},[(0,U._)("td",null,[(0,U._)("p",null,[(0,U._)("span",{textContent:(0,$.zw)(o)},null,8,Cn),(0,U._)("code",{textContent:(0,$.zw)(s)},null,8,kn),(0,U._)("span",{textContent:(0,$.zw)(i)},null,8,_n)]),(0,U._)("label",null,[(0,U.wy)((0,U._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.custom[l]=e,disabled:n.readOnly},null,8,Sn),[[L.e8,a.custom[l]]]),(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelKeepOriginal"))},null,8,zn)])]),(0,U._)("td",null,[(0,U.wy)((0,U._)("textarea",{"onUpdate:modelValue":e=>a.custom[t]=e,spellcheck:"false",rows:e.calcRows(a.custom[t]),disabled:n.readOnly},null,8,Dn),[[L.nr,a.custom[t]]])])]))),128))])],512))]]),In=En,Vn=["data-editing"],jn={class:"mb-1"},Wn={key:1,class:"inline-block ml-2"},Tn=["disabled"],On=["textContent"],Ln=["textContent"],Mn=["disabled"],An={class:"ml-2 mr-2c"},Zn=(0,U._)("kbd",null,"PageUp",-1),Hn=(0,U._)("kbd",null,"PageDown",-1),Pn=(0,U._)("kbd",null,"\u2191",-1),Nn=(0,U._)("kbd",null,"\u2193",-1),Bn=(0,U._)("kbd",null,"Tab",-1),Fn=(0,U._)("kbd",null,"Shift-Tab",-1),Yn=(0,U._)("kbd",null,"Enter",-1),qn=(0,U._)("kbd",null,"Ctrl-Del",-1),Kn=["textContent"],Jn=["onKeydown","onClick"],Gn={class:"ellipsis"},Qn=["textContent"],Xn=["textContent"],el=["textContent"],tl=["onClick"],nl=["textContent"],ll=["onClick"],ol=["textContent"],al=["textContent"],sl=["textContent"],il=["textContent"],rl={key:3,class:"edit-values-panel flex flex-col mb-1c"},cl={class:"control"},ul=["textContent"],dl=["textContent","onClick","title","disabled"],pl=["textContent"],ml=["textContent"],hl=["readOnly"],gl=["textContent"];let fl;const vl={error:"",dirty:!1},wl=e=>e.length>1024?e.slice(0,1024):e,bl=e=>{try{return JSON.stringify(JSON.parse(e),null,"  ")}catch(t){return e}},yl=(e,t)=>{e.page=Math.max(1,Math.min(e.totalPages,e.page+t))},xl={condition:"!edit"},Cl={props:["active","script","readOnly"],components:{Icon:he.Z,VmCode:Ht.default},data:()=>({current:null,loading:!0,page:null,values:null,trash:null}),computed:{keys(){return c.keys(this.values||{}).sort()},totalPages(){return Math.ceil(this.keys.length/25)},pageKeys(){const e=25*(this.page-1);return this.keys.slice(e,e+25)}},mounted(){this.$refs.container.addEventListener("focusin",e=>{O.$J.setContext("edit","selectionEnd"in e.target)})},watch:{active(e){const t=this.script.props.id;var n,l;if(e?(null==(n=this.current?this.cm:fl)||n.focus(),(0,y.gj)("GetValueStore",t,void 0,this.sender={tab:{id:Math.random()-2},frameId:0}).then(e=>{const t=!this.values;this.setData(e)&&t&&this.keys.length&&this.autofocus(!0),this.loading=!1}),this.disposeList=[O.$J.register("pageup",()=>yl(this,-1),xl),O.$J.register("pagedown",()=>yl(this,1),xl)]):null==(l=this.disposeList)||l.forEach(e=>e()),e){const e=this.onStorageChanged,n=browser.extension.getBackgroundPage();this[Un.vy]=browser.runtime.connect({name:Un.vy+JSON.stringify({cfg:{value:t},id:null==n?void 0:n[Un.vy](e),tabId:this.sender.tab.id})}),n||this[Un.vy].onMessage.addListener(e)}else{var o;null==(o=this[Un.vy])||o.disconnect(),this[Un.vy]=null}},current(e,t){if(e)fl=document.activeElement,this.$nextTick(()=>{const n=this.$refs,l=n.value,{cm:o}=l;if(this.cm=o,t&&l.updateValue(e.value),e.isNew){const e=n.key;e.setSelectionRange(0,0),e.focus()}else o.setCursor(0,0),o.focus()});else if(t){var n;null==(n=fl)||n.focus()}},page(){fl=null,this.autofocus()}},methods:{autofocus(e){this.$nextTick(()=>{this.$refs.editAll[e?"click":"focus"]()})},getLength(e,t){const n=e.length+(this.values[e]||t).length-1;return n<1e4?n:(0,y.aj)(n)},getValue(e,t,n){let l=this.values[e]||n;const o=l[0];return l=l.slice(1),"s"===o?l=JSON.stringify(l):t||(l=bl(l)),t?wl(l):l},getValueAll(){return`{\n  ${this.keys.map(e=>`${JSON.stringify(e)}: ${this.getValue(e)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`},setData(e={}){if(!(0,ue.vZ)(this.values,e))return this.values=e,this.page=Math.min(this.page,this.totalPages)||1,this.calcSize(),!0},calcSize(){D.storageSize=this.keys.reduce((e,t)=>e+t.length+4+this.values[t].length+2,2)},updateValue({key:e,jsonValue:t,rawValue:n=(0,y.bd)(t)||""}){const{id:l}=this.script.props;return(0,y.gj)("UpdateValue",{id:l,key:e,raw:n},void 0,this.sender).then(()=>{n?this.values[e]=n:delete this.values[e],this.calcSize()})},onNew(){this.current=(0,Zt.Z)({isNew:!0,key:"",value:""},vl)},async onRemove(e){var t;this.updateValue({key:e}),(this.trash||(this.trash={}))[e+Math.random()]={key:e,rawValue:this.values[e],cut:this.getValue(e,!0),len:this.getLength(e)},(null==(t=this.current)?void 0:t.key)===e&&(this.current=null)},onRestore(e){const{trash:t}=this,{key:n,rawValue:l}=t[e];delete t[e],(0,y.xb)(t)&&(this.trash=null),this.updateValue({key:n,rawValue:l})},onEdit(e){this.current=(0,Zt.Z)({key:e,value:this.getValue(e)},vl)},onEditAll(){this.current=(0,Zt.Z)({isAll:!0,value:this.getValueAll()},vl)},async onSave(e){const{cm:t,current:n}=this;if(n.jsonPaused&&(n.jsonPaused=!1,this.onChange()),n.error){const e=n.errorPos;return t.setSelection(e,{line:e.line,ch:e.ch+1}),t.focus(),void(0,_.PV)({text:n.error})}1===e?(t.markClean(),n.dirty=!1):this.current=null,n.isAll?await(0,y.gj)("SetValueStores",{[this.script.props.id]:g(ue.Xw,n.jsonValue,e=>(0,y.bd)(e)||"")}):await this.updateValue(n)},onCancel(){const e=this.current;if(e.dirty){const t=`${e.key} ${1e9*Math.random()|0}`,n=this.cm.getValue(),l=(0,y.bd)(n);(this.trash||(this.trash={}))[t]={key:t,rawValue:l,cut:wl(n),len:this.getLength(t,l)}}this.current=null},onChange(e){const{current:t}=this;if(t.dirty=e,t.error=null,t.jsonPaused)return;const{cm:n}=this,l=p.now();try{const e=n.getValue();t.jsonValue=e.trim()?JSON.parse(e):void 0}catch(e){const l=/(position\s+)(\d+)|$/,o=n.posFromIndex(+`${e}`.match(l)[2]||0);t.error=`${e}`.replace(l,`$1${o.line+1}:${o.ch+1}`),t.errorPos=o,t.jsonValue=void 0}t.jsonPaused=p.now()-l>10},onStorageChanged(e){const t=c.values(e)[0].newValue;if(t){const{current:e}=this,n=null==e?void 0:e.key,l=e&&(e.isAll?this.getValueAll:this.getValue);if(this.setData(t instanceof c?t:(0,ue.p$)(t)),e){const t=l(n);this.cm.getValue()===t?(e.isNew=!1,e.dirty=!1):e.dirty||(e.value=t,this.onChange())}}else this.setData(t)},onUpDown(e){(0,O.nk)(("ArrowDown"===e.key?1:e.target!==this.$refs.editAll&&-1)||0)}}},kl=(0,kt.Z)(Cl,[["render",(e,t)=>{const n=(0,U.up)("icon"),l=(0,U.up)("vm-code");return(0,U.wg)(),(0,U.iD)("div",{class:"edit-values",ref:"container","data-editing":e.current&&""},[(0,U._)("div",jn,[e.readOnly?(0,U.kq)("",!0):((0,U.wg)(),(0,U.iD)("button",{key:0,onClick:t[0]||(t[0]=(...t)=>e.onNew&&e.onNew(...t))},"+")),e.totalPages>1?((0,U.wg)(),(0,U.iD)("div",Wn,[(0,U._)("button",{disabled:1===e.page,onClick:t[1]||(t[1]=t=>e.page-=1)},"\u2190",8,Tn),(0,U._)("span",{class:"ml-1",textContent:(0,$.zw)(e.page)},null,8,On),(0,U.Uk)(" / "),(0,U._)("span",{class:"mr-1",textContent:(0,$.zw)(e.totalPages)},null,8,Ln),(0,U._)("button",{disabled:e.page>=e.totalPages,onClick:t[2]||(t[2]=t=>e.page+=1)},"\u2192",8,Mn)])):(0,U.kq)("",!0),(0,U._)("span",An,[(0,U._)("span",null,[e.totalPages>1?((0,U.wg)(),(0,U.iD)(U.HY,{key:0},[Zn,(0,U.Uk)(", "),Hn,(0,U.Uk)(", ")],64)):(0,U.kq)("",!0),Pn,(0,U.Uk)(", "),Nn,(0,U.Uk)(", "),Bn,(0,U.Uk)(", "),Fn,(0,U.Uk)(", ")]),(0,U._)("span",null,[Yn,(0,U.Uk)(": "+(0,$.zw)(e.i18n("buttonEdit"))+",",1)]),(0,U._)("span",null,[qn,(0,U.Uk)(": "+(0,$.zw)(e.i18n("buttonRemove")),1)])])]),(0,U._)("div",{class:"edit-values-table main",onKeydown:[t[4]||(t[4]=(0,L.D2)((0,L.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[5]||(t[5]=(0,L.D2)((0,L.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[(0,U._)("a",{ref:"editAll",class:"edit-values-row flex",onClick:t[3]||(t[3]=(...t)=>e.onEditAll&&e.onEditAll(...t)),tabindex:"0",textContent:(0,$.zw)(e.i18n("editValueAllHint"))},null,8,Kn),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.pageKeys,t=>((0,U.wg)(),(0,U.iD)("div",{key:t,class:"edit-values-row flex monospace-font",onKeydown:(0,L.D2)((0,L.iM)(n=>e.onRemove(t),["ctrl","exact"]),["delete"]),onClick:n=>e.onEdit(t)},[(0,U._)("div",Gn,[(0,U._)("a",{textContent:(0,$.zw)(t),tabindex:"0"},null,8,Qn)]),(0,U._)("div",{class:"ellipsis flex-auto",textContent:(0,$.zw)(e.getValue(t,!0))},null,8,Xn),(0,U._)("pre",{textContent:(0,$.zw)(e.getLength(t))},null,8,el),(0,U._)("div",{class:"del",onClick:(0,L.iM)(n=>e.onRemove(t),["stop"])},[(0,U.Wm)(n,{name:"trash"})],8,tl)],40,Jn))),128))],32),e.trash?((0,U.wg)(),(0,U.iD)("h3",{key:0,textContent:(0,$.zw)(e.i18n("headerRecycleBin"))},null,8,nl)):(0,U.kq)("",!0),e.trash?((0,U.wg)(),(0,U.iD)("div",{key:1,class:"edit-values-table trash monospace-font",onKeydown:[t[6]||(t[6]=(0,L.D2)((0,L.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["down"])),t[7]||(t[7]=(0,L.D2)((0,L.iM)((...t)=>e.onUpDown&&e.onUpDown(...t),["exact"]),["up"]))]},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.trash,({key:t,cut:n,len:l},o)=>((0,U.wg)(),(0,U.iD)("div",{key:o,class:"edit-values-row flex",onClick:t=>e.onRestore(o)},[(0,U._)("a",{class:"ellipsis",textContent:(0,$.zw)(t),tabindex:"0"},null,8,ol),(0,U._)("s",{class:"ellipsis flex-auto",textContent:(0,$.zw)(n)},null,8,al),(0,U._)("pre",{textContent:(0,$.zw)(l)},null,8,sl)],8,ll))),128))],32)):(0,U.kq)("",!0),e.loading||e.keys.length?(0,U.kq)("",!0):((0,U.wg)(),(0,U.iD)("div",{key:2,class:"edit-values-empty mt-1",textContent:(0,$.zw)(e.i18n("noValues"))},null,8,il)),e.current?((0,U.wg)(),(0,U.iD)("div",rl,[(0,U._)("div",cl,[(0,U._)("h4",{textContent:(0,$.zw)(e.current.isAll?e.i18n("labelEditValueAll"):e.i18n("labelEditValue"))},null,8,ul),(0,U._)("div",null,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)([e.i18n("buttonOK"),e.i18n("buttonApply")],(t,n)=>((0,U.wg)(),(0,U.iD)("button",{key:t,textContent:(0,$.zw)(t),onClick:t=>e.onSave(n),class:(0,$.C_)({"has-error":e.current.error,"save-beacon":!n}),title:e.current.error,disabled:e.current.error||!e.current.dirty},null,10,dl))),128)),(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonCancel")),onClick:t[8]||(t[8]=(...t)=>e.onCancel&&e.onCancel(...t))},null,8,pl)])]),(0,U.wy)((0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("valueLabelKey"))},null,8,ml),(0,U.wy)((0,U._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.current.key=t),readOnly:!e.current.isNew||e.readOnly,ref:"key",spellcheck:"false",onKeydown:t[10]||(t[10]=(0,L.D2)((0,L.iM)((...t)=>e.onCancel&&e.onCancel(...t),["exact","stop"]),["esc"]))},null,40,hl),[[L.nr,e.current.key]])],512),[[L.F8,!e.current.isAll]]),(0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.current.isAll?e.i18n("valueLabelValueAll"):e.i18n("valueLabelValue"))},null,8,gl),(0,U.Wm)(l,{value:e.current.value,ref:"value",class:"h-100 mt-1",mode:"application/json",readOnly:e.readOnly,onCodeDirty:e.onChange,commands:{close:e.onCancel,save:e.onSave}},null,8,["value","readOnly","onCodeDirty","commands"])])])):(0,U.kq)("",!0)],8,Vn)}]]),_l={class:"edit-help mb-2c"},Sl=["innerHTML"],zl=(0,U._)("a",{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"},"violentmonkey.github.io/api/",-1),Dl={class:"keyboard"},Ul=["textContent"],$l=["textContent"],Rl=["textContent"],El={props:["hotkeys"]},Il=(0,kt.Z)(El,[["render",(e,t,n,l,o,a)=>((0,U.wg)(),(0,U.iD)("div",_l,[(0,U._)("div",null,[(0,U._)("h3",{innerHTML:e.i18n("editHelpDocumention")},null,8,Sl),zl]),(0,U._)("div",Dl,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("editHelpKeyboard"))},null,8,Ul),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(n.hotkeys,([e,t])=>((0,U.wg)(),(0,U.iD)("dl",{key:e},[(0,U._)("dt",{class:"monospace-font",textContent:(0,$.zw)(e)},null,8,$l),(0,U._)("dd",{textContent:(0,$.zw)(t)},null,8,Rl)]))),128))])]))]]),Vl={name:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},jl=(e,t)=>null!=e?e:Vl[t],Wl=e=>""!==e?e:null,Tl=["include","match","exclude","excludeMatch"],Ol=e=>e?`${e.join("\n")}${e.length?"\n":""}`:"",Ll=e=>e.trim()?e.split("\n").map(e=>e.trim()).filter(i):null,Ml=[l,o],Al=e=>e||"",Zl=e=>e||null;let Hl,Pl;const Nl=async e=>{k.Z.get("editorWindow")&&(e||(e=await(null==y.oy?void 0:y.oy.getCurrent())||{}),"normal"===e.state&&k.Z.set("editorWindowPos",(0,ue.zr)(e,["left","top","width","height"])))},Bl=({id:e,tabs:n})=>{if(1===n.length){const{onBoundsChanged:n}=d.windows;n?n.addListener(t=>{t.id===e&&Nl(t)}):(t.addEventListener("resize",(0,y.Ds)(Nl,100)),Pl=!0)}};let Fl;const Yl=(e,t)=>e<t?-1:e>t,ql={props:["initial","initialCode","readOnly"],components:{VmCode:Ht.default,VmSettings:In,VmValues:kl,VmExternals:Pt.Z,VmHelp:Il},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null,errors:null,urlMatching:"https://violentmonkey.github.io/api/matching/"}},computed:{navItems(){const{meta:e,props:t}=this.script||{},n=(null==e?void 0:e.require.length)&&"@require",l=!(0,y.xb)(null==e?void 0:e.resources)&&"@resource",o=D.storageSize;return(0,Zt.Z)({code:(0,y.ag)("editNavCode"),settings:(0,y.ag)("editNavSettings")},(null==t?void 0:t.id)&&{values:(0,y.ag)("editNavValues")+(o?` (${(0,y.aj)(o)})`:"")},(n||l)&&{externals:g(y.Hv,[n,l],"/")},{help:"?"})},scriptName(){const{script:e}=this,t=(null==e?void 0:e.meta)&&(0,y.pV)(e);return D.title=t,t}},watch:{nav(e){O.$J.setContext("tabCode","code"===e),"code"===e&&this.$nextTick(()=>{this.$refs.code.cm.focus()})},canSave(e){this.toggleUnloadSentry(e),O.$J.setContext("canSave",e)},"initial.error"(e){e&&(0,_.PV)({text:`${this.initial.message}\n\n${e}`})}},created(){var t;this.script=this.initial,this.toggleUnloadSentry=(0,z.Q$)(null,()=>{this.$refs.code.cm.focus()}),k.Z.get("editorWindow")&&1===e.history.length&&(null==(t=browser.windows)||t.getCurrent({populate:!0}).then(Bl))},async mounted(){var e;document.body.classList.add("edit-open"),D.storageSize=0,this.nav="code";const{custom:t,config:n}=this.script,{noframes:l}=t;this.settings={config:{notifyUpdates:`${null!=(e=n.notifyUpdates)?e:""}`,shouldUpdate:i(n.shouldUpdate)},custom:(0,Zt.Z)({},(0,ue.zr)(t,c.keys(Vl),jl),(0,ue.zr)(t,Ml,Al),(0,ue.zr)(t,Tl,Ol),{noframes:null==l?"":+l})},Hl=(0,ue.p$)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var o;const e=c.values(this.navItems),t=[["Alt-PageUp",` ${e.join(" < ")}`],["Alt-PageDown",` ${e.join(" > ")}`],...c.entries(this.$refs.code.expandKeyMap()).sort((e,t)=>Yl(e[1],t[1])||Yl(e[0],t[0]))];Fl=null==(o=t.find(([,e])=>"save"===e))?void 0:o[0],Fl||(Fl="Ctrl-S",t.unshift([Fl,"save"])),this.hotkeys=t}this.disposeList=[O.$J.register("a-pageup",this.switchPrevPanel),O.$J.register("a-pagedown",this.switchNextPanel),O.$J.register(Fl.replace(/(?:Ctrl|Cmd)-/i,"ctrlcmd-"),this.save),O.$J.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})],this.code=this.initialCode},methods:{async save(){if(!this.canSave)return;Pl&&Nl();const{settings:e}=this,{config:t,custom:n}=e,{notifyUpdates:l}=t,{noframes:o}=n;try{var a,s,i;const r=this.$refs.code,u=null==(a=this.script)||null==(s=a.props)?void 0:s.id,d=await(0,y.gj)("ParseScript",{id:u,code:r.getRealContent(),config:(0,Zt.Z)({},t,{notifyUpdates:l?+l:null}),custom:(0,Zt.Z)({},(0,ue.zr)(n,c.keys(Vl),Wl),(0,ue.zr)(n,Tl,Ll),(0,ue.zr)(n,Ml,Zl),{noframes:o?+o:null}),isNew:!u,message:""}),p=null==d||null==(i=d.where)?void 0:i.id;Hl=(0,ue.p$)(e),r.cm.markClean(),this.codeDirty=!1,this.canSave=!1,this.errors=d.errors,p&&(this.script=d.update,u||history.replaceState(null,this.scriptName,`${v}/${p}`))}catch(e){(0,_.GW)(`${e.message||e}`,{cancel:!1})}},close(e){var t;e&&"code"!==this.nav?this.nav="code":(this.$emit("close"),f&&(null==(t=document.activeElement)||t.blur()))},saveClose(){this.save().then(this.close)},switchPanel(e){const t=c.keys(this.navItems);this.nav=t[(t.indexOf(this.nav)+e+t.length)%t.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!(0,ue.vZ)(this.settings,Hl)}},beforeUnmount(){var e;document.body.classList.remove("edit-open"),D.title=null,this.toggleUnloadSentry(!1),null==(e=this.disposeList)||e.forEach(e=>{e()})}},Kl=(0,kt.Z)(ql,[["render",(e,t)=>{var n,l;const o=(0,U.up)("vm-code"),a=(0,U.up)("vm-settings"),s=(0,U.up)("vm-values"),i=(0,U.up)("vm-externals"),r=(0,U.up)("vm-help");return(0,U.wg)(),(0,U.iD)("div",zt,[(0,U._)("div",Dt,[(0,U._)("nav",null,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.navItems,(t,n)=>((0,U.wg)(),(0,U.iD)("div",{key:n,class:(0,$.C_)(["edit-nav-item",{active:e.nav===n}]),textContent:(0,$.zw)(t),onClick:t=>e.nav=n},null,10,Ut))),128))]),(0,U._)("div",$t,[null!=(n=e.script)&&null!=(l=n.config)&&l.removed?((0,U.wg)(),(0,U.iD)("span",{key:0,class:"subtle",textContent:(0,$.zw)(e.i18n("headerRecycleBin")+" / ")},null,8,Rt)):(0,U.kq)("",!0),(0,U.Uk)(" "+(0,$.zw)(e.scriptName),1)]),(0,U._)("div",Et,[(0,U._)("a",{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("editHowToHint"))},null,8,It)]),(0,U._)("div",Vt,[(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonSave")),onClick:t[0]||(t[0]=(...t)=>e.save&&e.save(...t)),disabled:!e.canSave,class:(0,$.C_)({"has-error":e.errors}),title:e.errors},null,10,jt),(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonSaveClose")),onClick:t[1]||(t[1]=(...t)=>e.saveClose&&e.saveClose(...t)),disabled:!e.canSave},null,8,Wt),(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonClose")),onClick:t[2]||(t[2]=(...t)=>e.close&&e.close(...t))},null,8,Tt)])]),(0,U.wy)((0,U.Wm)(o,{class:"flex-auto",value:e.code,readOnly:e.readOnly,ref:"code",active:"code"===e.nav,commands:e.commands,onCodeDirty:t[3]||(t[3]=t=>e.codeDirty=t)},null,8,["value","readOnly","active","commands"]),[[L.F8,"code"===e.nav]]),(0,U.wy)((0,U.Wm)(a,{class:"edit-body",readOnly:e.readOnly,active:"settings"===e.nav,settings:e.settings,value:e.script},null,8,["readOnly","active","settings","value"]),[[L.F8,"settings"===e.nav]]),(0,U.wy)((0,U.Wm)(s,{class:"edit-body",readOnly:e.readOnly,active:"values"===e.nav,script:e.script},null,8,["readOnly","active","script"]),[[L.F8,"values"===e.nav]]),"externals"===e.nav?((0,U.wg)(),(0,U.j4)(i,{key:0,class:"flex-auto",value:e.script},null,8,["value"])):(0,U.kq)("",!0),(0,U.wy)((0,U.Wm)(r,{class:"edit-body",hotkeys:e.hotkeys},null,8,["hotkeys"]),[[L.F8,"help"===e.nav]]),e.errors?((0,U.wg)(),(0,U.iD)("div",Ot,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.errors,e=>((0,U.wg)(),(0,U.iD)("p",{key:e,textContent:(0,$.zw)(e),class:"text-red"},null,8,Lt))),128)),(0,U._)("p",Mt,[(0,U._)("a",{href:e.urlMatching,target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.urlMatching)},null,8,At)])])):(0,U.kq)("",!0)])}]]),Jl={sort:{exec:{title:(0,y.ag)("filterExecutionOrder")},alpha:{title:(0,y.ag)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:e}},{$cache:{lowerName:t}})=>e<t?-1:e>t},update:{title:(0,y.ag)("filterLastUpdateOrder"),compare:({props:{lastUpdated:e}},{props:{lastUpdated:t}})=>(+t||0)-(+e||0)},size:{title:(0,y.ag)("filterSize"),compare:(e,t)=>t.$cache.sizeNum-e.$cache.sizeNum}}},Gl=(0,S.qj)({searchScope:null,showEnabledFirst:null,showOrder:null,viewSingleColumn:null,viewTable:null,sort:null});g(ue.SE,Gl,e=>{(0,ce.Z)(`filters.${e}`,t=>{Gl[e]=t,"sort"!==e||Jl.sort[t]||(Gl[e]=c.keys(Jl.sort)[0])})});const Ql="tabScripts",Xl="tabScripts && !inputFocus",eo=`${Xl} && selectedScript && !showRecycle`,to=`${Xl} && selectedScript && showRecycle`,no=`${Xl} && !buttonFocus`,lo=`${Xl} && selectedScript && showHotkeys`,oo={edit:"e",toggle:"space",update:"r",restore:"r",remove:"x"},ao=(e,t)=>t.map(([t,n,l])=>O.$J.register(t,e,{condition:n,caseSensitive:l}));let so=0,io=[],ro=[];const co=(0,S.iH)(),uo=(0,S.iH)(),po=(0,S.iH)(),mo=(0,S.qj)({focusedIndex:-1,menuNewActive:!1,showHotkeys:!1,canRenderScripts:!D.route.paths[1],search:"",searchError:null,sortedScripts:[],filteredScripts:[],script:null,code:"",numColumns:0,batchRender:{limit:so}}),ho=(0,U.Fl)(()=>"recycleBin"===D.route.paths[0]),go=(0,U.Fl)(()=>!ho.value&&"exec"===Gl.sort),fo=(0,U.Fl)(()=>{var e;return null==(e=Jl.sort[Gl.sort])?void 0:e.compare}),vo=(0,U.Fl)(()=>mo.filteredScripts[mo.focusedIndex]),wo=(0,U.Fl)(()=>D.loading||(mo.search?mo.sortedScripts.find(e=>!1!==e.$cache.show):mo.sortedScripts.length)?null:(0,y.ag)("labelNoSearchScripts")),bo=(0,U.Fl)(()=>mo.search&&["code","all"].includes(Gl.searchScope)&&D.scripts.filter(e=>null==e.$cache.code).map(e=>e.props.id)),yo=()=>ho.value?D.removedScripts:D.scripts,xo=(0,y.Ds)(So,100),Co=(0,y.Ds)(jo);function ko(){!ho.value&&D.needRefresh&&(D.scripts=D.scripts.filter(e=>!e.config.removed),D.needRefresh=!1),mo.focusedIndex=-1,So()}async function _o(){const e=bo.value;null!=e&&e.length&&await Oo(e),So(),Vo()}function So(){const e=[...yo()],t=mo.search?Wo(e):e.length,n=fo.value;var l;n&&e.sort((l=n,Gl.showEnabledFirst?(e,t)=>t.config.enabled-e.config.enabled||l(e,t):l)),mo.sortedScripts=e,mo.filteredScripts=mo.search?e.filter(({$cache:e})=>e.show):e,Ao(mo.focusedIndex),!so||t<so?jo():Co()}function zo(){(0,y.gj)("CheckUpdate")}async function Do(){try{var e;let t=await(0,_.GW)((0,y.ag)("hintInputURL"),{input:"",ok:{type:"submit"}});t=null==(e=t)?void 0:e.trim(),t&&(t.includes("://")||(t=`https://${t}`),new URL(t),await(0,y.gj)("ConfirmInstall",{url:t}))}catch(e){e&&(0,_.PV)({text:e})}}async function Uo(e,t){if(e===t)return;const n=mo.filteredScripts,l=D.scripts,o=n[e],a=l.indexOf(o),s=l.indexOf(n[t]),{id:i}=o.props;await(0,y.gj)("Move",{id:i,offset:s-a})&&(l.splice(a,1),l.splice(s,0,o),l.forEach((e,t)=>{e.props.position=t+1}),So())}function $o(e){k.Z.set("filters.sort",e.target.value)}function Ro(e){mo.search&&To(),k.Z.set("filters.searchScope",e.target.value)}function Eo(e){mo.menuNewActive=e}function Io(e){const n=g(y.Hv,[ho.value?"recycleBin":"scripts",e],"/");e||n!==(0,z.Qs)().pathname?(0,z.pV)(n):t.history.back()}async function Vo(){const[e,t,n]=D.route.paths,l="_new"===t&&await(0,y.gj)("NewScript",n),o=l?l.script:+t&&yo().find(e=>e.props.id===+t);if(o)return mo.code=l?l.code:await(0,y.gj)("GetScriptCode",t),void(mo.script=o);if(t&&(0,z.pV)(e,!0),mo.canRenderScripts||(mo.canRenderScripts=!0,hr()),jo(),mo.script=null,!f){const e=po.value,t=e.scrollTop;(0,U.Y3)(()=>{e.scrollTop=t})}}async function jo(){if(!mo.canRenderScripts)return;const{length:e}=mo.sortedScripts;let t=9;const n=(0,S.qj)({limit:t});mo.batchRender=n;const l=p.now();for(;t<e&&n===mo.batchRender;){if(so&&mo.search)for(let n=0;n<so&&t<e;t+=1)n+=mo.sortedScripts[t].$cache.show?1:0;else t+=so||1;n.limit=t,await new u(e=>(0,U.Y3)(e)),!so&&p.now()-l>=100&&(so=2*t),so&&t<e&&await(0,y.dL)()}}function Wo(e){let t,n=0;const[,l=mo.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),o="i"]=mo.search.match(/^\/(.+?)\/(\w*)$|$/),a=Gl.searchScope,s="name"===a||"all"===a,i="code"===a||"all"===a;try{t=l&&new RegExp(l,o),e.forEach(({$cache:e})=>{e.show=!l||s&&t.test(e.search)||i&&t.test(e.code),n+=e.show}),mo.searchError=null}catch(e){mo.searchError=e.message}return n}async function To(){const e=bo.value;null!=e&&e.length&&await Oo(e),xo()}async function Oo(e){const t=await(0,y.gj)("GetScriptCode",e);D.scripts.forEach(({$cache:e,props:{id:n}})=>{n in t&&(e.code=t[n])})}async function Lo(){await(0,_.GW)((0,y.ag)("buttonEmptyRecycleBin"))&&((0,y.gj)("CheckRemove",{force:!0}),D.removedScripts=[])}function Mo(){const e=Gl.viewTable?io:ro;mo.numColumns=Gl.viewSingleColumn?1:e.findIndex(e=>t.innerWidth<e)+1||e.length+1}function Ao(e){e=Math.min(e,mo.filteredScripts.length-1),(e=Math.max(e,-1))!==mo.focusedIndex&&(mo.focusedIndex=e)}function Zo(e,t){return(0,y.gj)("MarkRemoved",{id:e.props.id,removed:t})}function Ho(e){e.config.removed?(0,y.gj)("RemoveScripts",[e.props.id]):Zo(e,1)}async function Po(e){try{await Zo(e,0)}catch(t){(0,_.GW)(`${t.message||t}\n\n@namespace ${e.meta.namespace}\n@name ${e.meta.name}`,{cancel:!1})}}function No(e){(0,y.gj)("UpdateScriptInfo",{id:e.props.id,config:{enabled:e.config.enabled?0:1}})}function Bo(e){(0,y.gj)("CheckUpdate",e.props.id)}function Fo(e){if(!e)return;const t=uo.value;t.scroll({top:t.scrollTop+e,behavior:"smooth"})}function Yo(){const e=()=>{var e;O.$J.setContext("buttonFocus",(null==(e=document.activeElement)?void 0:e.tabIndex)>=0)};document.addEventListener("focus",e,!0);const t=[()=>document.removeEventListener("focus",e,!0),...f?[O.$J.register("tab",()=>{(0,O.nk)(1)}),O.$J.register("s-tab",()=>{(0,O.nk)(-1)})]:[],...ao(()=>{var e;null==(e=co.value)||e.focus()},[["ctrlcmd-f",Ql],["/",Xl,!0]]),...ao(()=>{var e;null==(e=co.value)||e.blur()},[["enter","tabScripts && inputFocus"]]),...ao(()=>{mo.showHotkeys=!1},[["escape",lo],["q",lo,!0]]),...ao(()=>{let e=mo.focusedIndex;e<0?e=0:e+=mo.numColumns,e<mo.filteredScripts.length&&Ao(e)},[["ctrlcmd-down",Ql],["down",Ql],["j",Xl,!0]]),...ao(()=>{const e=mo.focusedIndex-mo.numColumns;e>=0&&Ao(e)},[["ctrlcmd-up",Ql],["up",Ql],["k",Xl,!0]]),...ao(()=>{Ao(mo.focusedIndex-1)},[["ctrlcmd-left",Ql],["left",Xl],["h",Xl,!0]]),...ao(()=>{Ao(mo.focusedIndex+1)},[["ctrlcmd-right",Ql],["right",Xl],["l",Xl,!0]]),...ao(()=>{Ao(0)},[["ctrlcmd-home",Ql],["g g",Xl,!0]]),...ao(()=>{Ao(mo.filteredScripts.length-1)},[["ctrlcmd-end",Ql],["G",Xl,!0]]),...ao(()=>{Io(vo.value.props.id)},[[oo.edit,eo,!0],["enter",no]]),...ao(()=>{Ho(vo.value)},[["delete",eo],[oo.remove,eo,!0]]),...ao(()=>{Bo(vo.value)},[[oo.update,eo,!0]]),...ao(()=>{No(vo.value)},[[oo.toggle,eo,!0]]),...ao(()=>{Po(vo.value)},[[oo.restore,to,!0]]),...ao(()=>{mo.showHotkeys=!mo.showHotkeys},[["?",Xl,!0]])];return()=>t.forEach(e=>{e()})}const qo={components:{Dropdown:de.Z,Tooltip:pe.Z,SettingCheck:me.Z,Icon:he.Z,LocaleGroup:ge.Z,ScriptItem:St,Edit:Kl},directives:{focus:_.Tu},setup:()=>(ko(),(0,U.YP)(ho,ko),(0,U.YP)(go,e=>Ze(uo.value,Uo,e)),(0,U.YP)(()=>mo.search,To),(0,U.YP)(()=>[Gl.sort,Gl.showEnabledFirst],xo),(0,U.YP)(()=>[Gl.viewSingleColumn,Gl.viewTable],Mo),(0,U.YP)(yo,_o),(0,U.YP)(()=>D.route.paths[1],Vo),(0,U.YP)(vo,e=>{O.$J.setContext("selectedScript",e)}),(0,U.YP)(()=>mo.showHotkeys,e=>{O.$J.setContext("showHotkeys",e)}),(0,U.bv)(()=>{if(D.loading||_o(),!ro.length){const t=getComputedStyle(document.documentElement);[ro,io]=["cards","table"].map(e=>{var n;return(null==(n=t.getPropertyValue(`--columns-${e}`))?void 0:n.split(",").map(Number).filter(i))||[]}),e.addEventListener("resize",Mo)}return Mo(),Yo()}),{refSearch:co,refList:uo,scroller:po,store:D,state:mo,filters:Gl,filterOptions:Jl,currentSortCompare:fo,selectedScript:vo,draggable:go,scriptHotkeys:oo,showRecycle:ho,message:wo,handleStateChange:Eo,handleOrderChange:$o,handleEditScript:Io,handleEmptyRecycleBin:Lo,handleInstallFromURL:Do,handleUpdateAll:zo,handleOnScopeChange:Ro,handleActionRemove:Ho,handleActionRestore:Po,handleActionToggle:No,handleActionUpdate:Bo,handleSmoothScroll:Fo})},Ko=(0,kt.Z)(qo,[["render",(e,t)=>{const n=(0,U.up)("Icon"),l=(0,U.up)("Tooltip"),o=(0,U.up)("Dropdown"),a=(0,U.up)("LocaleGroup"),s=(0,U.up)("SettingCheck"),i=(0,U.up)("script-item"),r=(0,U.up)("edit"),c=(0,U.Q2)("focus");return(0,U.wg)(),(0,U.iD)("div",M,[e.state.canRenderScripts?((0,U.wg)(),(0,U.iD)("div",A,[(0,U._)("header",Z,[e.showRecycle?((0,U.wg)(),(0,U.iD)("div",{key:1,class:"flex-auto",textContent:(0,$.zw)(e.i18n("headerRecycleBin"))},null,8,q)):((0,U.wg)(),(0,U.iD)("div",H,[(0,U.Wm)(o,{closeAfterClick:!0,class:(0,$.C_)({active:e.state.menuNewActive}),onStateChange:e.handleStateChange},{content:(0,U.w5)(()=>[(0,U._)("a",{class:"dropdown-menu-item",textContent:(0,$.zw)(e.i18n("buttonNew")),tabindex:"0",onClick:t[0]||(t[0]=(0,L.iM)(t=>e.handleEditScript("_new"),["prevent"]))},null,8,N),(0,U._)("a",{class:"dropdown-menu-item",textContent:(0,$.zw)(e.i18n("installFrom","OpenUserJS")),href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},null,8,B),(0,U._)("a",{class:"dropdown-menu-item",textContent:(0,$.zw)(e.i18n("installFrom","GreasyFork")),href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},null,8,F),(0,U._)("a",{class:"dropdown-menu-item",textContent:(0,$.zw)(e.i18n("buttonInstallFromURL")),tabindex:"0",onClick:t[1]||(t[1]=(0,L.iM)((...t)=>e.handleInstallFromURL&&e.handleInstallFromURL(...t),["prevent"]))},null,8,Y)]),default:(0,U.w5)(()=>[(0,U.Wm)(l,{content:e.i18n("buttonNew"),placement:"bottom",align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",P,[(0,U.Wm)(n,{name:"plus"})])]),_:1},8,["content"])]),_:1},8,["class","onStateChange"]),(0,U.Wm)(l,{content:e.i18n("buttonUpdateAll"),placement:"bottom",align:"start"},{default:(0,U.w5)(()=>[(0,U._)("a",{class:"btn-ghost",tabindex:"0",onClick:t[2]||(t[2]=(...t)=>e.handleUpdateAll&&e.handleUpdateAll(...t))},[(0,U.Wm)(n,{name:"refresh"})])]),_:1},8,["content"])])),(0,U.Wm)(o,{align:"right",class:"filter-sort"},{content:(0,U.w5)(()=>[(0,U._)("div",null,[(0,U.Wm)(a,{"i18n-key":"labelFilterSort"},{default:(0,U.w5)(()=>[(0,U._)("select",{value:e.filters.sort,onChange:t[3]||(t[3]=(...t)=>e.handleOrderChange&&e.handleOrderChange(...t))},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.filterOptions.sort,(e,t)=>((0,U.wg)(),(0,U.iD)("option",{textContent:(0,$.zw)(e.title),key:t,value:t},null,8,G))),128))],40,J)]),_:1})]),(0,U.wy)((0,U._)("div",null,[(0,U.Wm)(s,{name:"filters.showEnabledFirst",label:e.i18n("optionShowEnabledFirst")},null,8,["label"])],512),[[L.F8,e.currentSortCompare]]),(0,U._)("div",null,[(0,U.Wm)(s,{name:"filters.showOrder",label:e.i18n("labelShowOrder")},null,8,["label"])]),(0,U._)("div",Q,[(0,U.Wm)(s,{name:"filters.viewTable",label:e.i18n("labelViewTable")},null,8,["label"]),(0,U.Wm)(s,{name:"filters.viewSingleColumn",label:e.i18n("labelViewSingleColumn")},null,8,["label"])])]),default:(0,U.w5)(()=>[(0,U.Wm)(l,{content:e.i18n("labelSettings"),placement:"bottom"},{default:(0,U.w5)(()=>[(0,U._)("a",K,[(0,U.Wm)(n,{name:"cog"})])]),_:1},8,["content"])]),_:1}),(0,U._)("form",{class:"filter-search hidden-xs flex",onSubmit:t[7]||(t[7]=(0,L.iM)(()=>{},["prevent"]))},[(0,U.Wm)(l,{placement:"bottom"},{content:(0,U.w5)(()=>[(0,U._)("pre",{class:"filter-search-tooltip",textContent:(0,$.zw)(e.state.searchError||e.i18n("titleSearchHint"))},null,8,ee)]),default:(0,U.w5)(()=>[(0,U._)("label",null,[(0,U.wy)((0,U._)("input",{type:"search",class:(0,$.C_)({"has-error":e.state.searchError}),placeholder:e.i18n("labelSearchScript"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.state.search=t),ref:"refSearch",id:"installed-search"},null,10,X),[[L.nr,e.state.search]]),(0,U.Wm)(n,{name:"search"})])]),_:1}),(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.filters.searchScope=t),onChange:t[6]||(t[6]=(...t)=>e.handleOnScopeChange&&e.handleOnScopeChange(...t))},[(0,U._)("option",{value:"name",textContent:(0,$.zw)(e.i18n("filterScopeName"))},null,8,te),(0,U._)("option",{value:"code",textContent:(0,$.zw)(e.i18n("filterScopeCode"))},null,8,ne),(0,U._)("option",{value:"all",textContent:(0,$.zw)(e.i18n("filterScopeAll"))},null,8,le)],544),[[L.bM,e.filters.searchScope]])],32)]),e.showRecycle?((0,U.wg)(),(0,U.iD)("div",oe,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("hintRecycleBin"))},null,8,ae),e.store.removedScripts.length?((0,U.wg)(),(0,U.iD)("a",{key:0,textContent:(0,$.zw)(e.i18n("buttonEmptyRecycleBin")),tabindex:"0",onClick:t[8]||(t[8]=(...t)=>e.handleEmptyRecycleBin&&e.handleEmptyRecycleBin(...t))},null,8,se)):(0,U.kq)("",!0)])):e.message?((0,U.wg)(),(0,U.iD)("div",{key:1,class:"hint mx-1 my-1 flex flex-col",textContent:(0,$.zw)(e.message)},null,8,ie)):(0,U.kq)("",!0),(0,U.wy)(((0,U.wg)(),(0,U.iD)("div",{class:"scripts",ref:"refList",style:(0,$.j5)(`--num-columns:${e.state.numColumns}`),"data-columns":e.state.numColumns,"data-show-order":e.filters.showOrder||null,"data-table":e.filters.viewTable||null},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.state.sortedScripts,(t,n)=>(0,U.wy)(((0,U.wg)(),(0,U.j4)(i,{key:t.props.id,focused:e.selectedScript===t,showHotkeys:e.state.showHotkeys,script:t,draggable:e.draggable,visible:n<e.state.batchRender.limit,viewTable:e.filters.viewTable,hotkeys:e.scriptHotkeys,onRemove:e.handleActionRemove,onRestore:e.handleActionRestore,onToggle:e.handleActionToggle,onUpdate:e.handleActionUpdate,onScrollDelta:e.handleSmoothScroll},null,8,["focused","showHotkeys","script","draggable","visible","viewTable","hotkeys","onRemove","onRestore","onToggle","onUpdate","onScrollDelta"])),[[L.F8,!e.state.search||!1!==t.$cache.show]])),128))],12,re)),[[c,!e.state.script]])])):(0,U.kq)("",!0),e.state.script?((0,U.wg)(),(0,U.j4)(U.lR,{key:1,to:"body"},[(0,U.Wm)(r,{initial:e.state.script,"initial-code":e.state.code,"read-only":!!e.state.script.config.removed,onClose:t[9]||(t[9]=t=>e.handleEditScript())},null,8,["initial","initial-code","read-only"])])):(0,U.kq)("",!0)],512)}]]),Jo=Ko,Go=["data-show-advanced"],Qo=["textContent"],Xo={class:"mb-1c"},ea=["textContent"],ta={class:"ml-2c flex flex-col"},na=["textContent"],la={class:"ml-2c"},oa=["onUpdate:modelValue"],aa=["value","textContent"],sa=["onUpdate:modelValue"],ia=["value","textContent"],ra=["textContent"],ca=["onUpdate:modelValue"],ua=["value","textContent"],da=["textContent"],pa=["onUpdate:modelValue"],ma=["textContent"],ha={class:"mb-1c"},ga=["textContent"],fa={class:"ml-2c flex flex-col"},va={class:"ml-2c flex flex-col"},wa={class:"mb-2c"},ba=["textContent"],ya=["open"],xa=["onClick"],Ca={class:"mb-1c"},ka=["textContent"],_a=["onUpdate:modelValue"],Sa=["value","textContent"],za={class:"ml-2c flex flex-col"},Da=["textContent"],Ua=["onUpdate:modelValue"],$a=["textContent"],Ra=["textContent"],Ea=(0,U._)("code",null,"page",-1),Ia={key:0},Va=(0,U._)("code",null,"page",-1),ja=["textContent"],Wa=["href"];var Ta=m(9285);const Oa=(0,m(3055).HP)(async()=>{await("/public/lib/zip-no-worker.min.js",new u((e,t)=>{const n=document.createElement("script");n.src="/public/lib/zip-no-worker.min.js",n.onload=e,n.onerror=t,document.body.append(n)}));const{zip:e}=t,n=["/public/lib/z-worker.js"];return e.configure({workerScripts:{deflate:n,inflate:n}}),e}),La=["textContent","disabled"],Ma=["disabled","textContent"],Aa={class:"mt-1"},Za=(0,U._)("br",null,null,-1),Ha={class:"import-report"},Pa=["data-type"],Na=["textContent"],Ba=["textContent","colspan"],Fa=(0,S.qj)([]),Ya={components:{SettingCheck:me.Z,Tooltip:pe.Z},data(){return{reports:Fa,store:D,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const e=document.createElement("input");e.type="file",e.accept=".zip",e.onchange=()=>{var t;return qa(null==(t=e.files)?void 0:t[0])},e.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=(0,y.ag)("buttonVacuuming");const{fixes:e,errors:t}=await(0,y.gj)("Vacuum"),n=null==t?void 0:t.join("\n");this.vacuuming=!1,this.labelVacuum=(0,y.ag)("buttonVacuumed")+(e?` (${e})`:""),n&&(0,_.GW)((0,y.ag)("msgErrorFetchingResource")+"\n\n"+n,{cancel:!1})}},mounted(){const e=Ja(this.$refs.buttonImport);t.addEventListener("hashchange",e),e()}};async function qa(e){if(!D.importing)try{await(D.importing=Ka(e))}finally{D.importing=null}}async function Ka(e){if(!e)return;Fa.length=0;const t=await Oa(),n=new t.ZipReader(new t.BlobReader(e)),l=await n.getEntries().catch(f)||[];if(Fa.length)return;f("",e.name,"info");const o={},a=l.reduce((e,t)=>{var n;return e+(null==(n=t.filename)?void 0:n.endsWith(".user.js"))},0),s=l.find(e=>{var t;return"violentmonkey"===(null==(t=e.filename)?void 0:t.toLowerCase())}),r=s&&await g(s)||{};var d,p;function m(e,t){try{return JSON.parse(e)}catch(e){f(e,t.filename,null)}}function h(e,t){return u.all(l.map(async n=>{const{filename:l}=n;if(null!=l&&l.endsWith(t)){const o=await g(n);return o&&e(n,o,l.slice(0,-t.length))}}))}async function g(e){const n=await e.getData(new t.TextWriter);return e.filename.endsWith(".js")?n:m(n,e)}function f(e,t,n="critical"){Fa.push({text:e,name:t,type:n})}function v(e=""){const t=c.keys(o).length,n=(0,y.ag)("msgImported",[t===a?t:`${t} / ${a}`]);return Fa[0].name=n,Fa[0].text=e,n}function w(e){return(0,y.rY)(e).filter(e=>"string"==typeof e)}r.scripts||(r.scripts={}),r.values||(r.values={}),await h(async(e,t,n)=>{const{meta:l,settings:o={},options:a}=t;if(!l||!a)return;const s=a.override||{};Fa[0].text="Tampermonkey",r.scripts[n]={config:{enabled:!1!==o.enabled?1:0,shouldUpdate:a.check_for_updates?1:0},custom:{downloadURL:"string"==typeof l.file_url?l.file_url:void 0,noframes:null==s.noframes?void 0:+!!s.noframes,runAt:Un.qh.test(a.run_at)?a.run_at:void 0,exclude:w(s.use_excludes),include:w(s.use_includes),match:w(s.use_matches),origExclude:!1!==s.merge_excludes,origInclude:!1!==s.merge_includes,origMatch:!1!==s.merge_matches},position:+o.position||void 0,props:{lastModified:+l.modified,lastUpdated:+l.modified}}},".options.json"),await h(async(e,t,n)=>{var l,a,s,i;const{filename:c}=e,u=r.scripts[n],d=(0,Zt.Z)({code:t},u&&{custom:u.custom,config:(0,Zt.Z)({enabled:null!=(l=u.enabled)?l:1,shouldUpdate:null!=(a=u.update)?a:1},u.config),position:u.position,props:{lastModified:u.lastModified||(null==(s=u.props)?void 0:s.lastModified)||+e.lastModDate,lastUpdated:u.lastUpdated||(null==(i=u.props)?void 0:i.lastUpdated)||+e.lastModDate}});try{o[n]=(await(0,y.gj)("ParseScript",d)).update.props.uri,v(c)}catch(e){f(e,c,"script")}},".user.js"),k.Z.get("importScriptData")&&(await h(async(e,t,n)=>{Fa[0].text="Tampermonkey",r.values[o[n]]=t.data},".storage.json"),(0,y.gj)("SetValueStores",r.values)),k.Z.get("importSettings")&&(0,y.gj)("SetOptions",(d=r.settings,p=([e,t])=>"sync"!==e&&{key:e,value:t},c.entries(d||{}).map(p).filter(i))),(0,y.gj)("CheckPosition"),(0,_.PV)({text:v()}),await n.close()}function Ja(e){let n;const l=t=>e.classList.toggle("drop-allowed",t),o=()=>l(!1),a=()=>{clearTimeout(n),n=setTimeout(o,250)},s=e=>{clearTimeout(n);const t=e.dataTransfer.types.includes("Files");t&&e.preventDefault(),l(t)},i=async e=>{e.preventDefault(),l(!1);const t=e.dataTransfer.files[0];await(0,_.GW)((0,y.ag)("buttonImportData"))&&await qa(t)};return()=>{const e="#settings"===t.location.hash,n=document[(e?"add":"remove")+"EventListener"];g(n,document,"dragend",o),g(n,document,"dragleave",a),g(n,document,"dragover",s),g(n,document,"drop",i)}}const Ga=(0,kt.Z)(Ya,[["render",(e,t)=>{const n=(0,U.up)("tooltip"),l=(0,U.up)("setting-check");return(0,U.wg)(),(0,U.iD)("div",null,[(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonImportData")),onClick:t[0]||(t[0]=(...t)=>e.pickBackup&&e.pickBackup(...t)),ref:"buttonImport",disabled:e.store.importing},null,8,La),(0,U.Wm)(n,{content:e.i18n("hintVacuum")},{default:(0,U.w5)(()=>[(0,U._)("button",{onClick:t[1]||(t[1]=(...t)=>e.vacuum&&e.vacuum(...t)),disabled:e.vacuuming,textContent:(0,$.zw)(e.labelVacuum)},null,8,Ma)]),_:1},8,["content"]),(0,U._)("div",Aa,[(0,U.Wm)(l,{name:"importScriptData",label:e.i18n("labelImportScriptData")},null,8,["label"]),Za,(0,U.Wm)(l,{name:"importSettings",label:e.i18n("labelImportSettings")},null,8,["label"])]),(0,U._)("table",Ha,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.reports,({type:e,name:t,text:n},l)=>((0,U.wg)(),(0,U.iD)("tr",{key:l,"data-type":e},[t?((0,U.wg)(),(0,U.iD)("td",{key:0,textContent:(0,$.zw)(t)},null,8,Na)):(0,U.kq)("",!0),(0,U._)("td",{textContent:(0,$.zw)(n),colspan:t?null:2},null,8,Ba)],8,Pa))),128))])])}]]),Qa={class:"export"},Xa={class:"flex flex-wrap center-items mr-1c"},es=["textContent","disabled"],ts={href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"},ns=["textContent"],ls={class:"mt-1"},os={class:"modal-content"},as=["download","href"],ss=(0,U._)("br",null,null,-1),is=(0,U._)("strong",null,"scripts.zip",-1);var rs=m(3011),cs=m(8346),us=m(3795),ds=m(8860),ps=m(3220);f&&(D.ffDownload={});const ms={components:{SettingCheck:me.Z,SettingText:ds.Z,Icon:he.Z,Modal:rs.Z,Tooltip:pe.Z},data:()=>({store:D,dateTokens:c.keys(cs.q).join(", "),exporting:!1}),methods:{async handleExport(){try{this.exporting=!0,hs(await fs(),this.getFileName())}finally{this.exporting=!1}},getFileName(){var e;const{tpl:t}=this.$refs;return t&&`${(0,cs.p)((null==(e=t.value)?void 0:e.trim())||t.defaultValue)}.zip`}}};function hs(e,t){const n=us.Z.firefox;if(n&&("win"===us.Z.os?n<56:"mac"===us.Z.os?n<61:n<63)){const n=new FileReader;n.onload=()=>{D.ffDownload={name:t,url:n.result}},n.readAsDataURL(e)}else(0,ps.l)(e,t)}function gs(e){return e.replace(/[\\/:*?"<>|]/g,"-")}async function fs(){const e=k.Z.get("exportValues"),t=await(0,y.gj)("ExportZip",{values:e}),n={},l={scripts:{},settings:k.Z.get()};delete l.settings.sync,e&&(l.values={});const o=((0,ue._M)(t,"items")||[]).map(({script:o,code:a})=>{let s=gs((0,y.pV)(o));n[s]?(n[s]+=1,s=`${s}_${n[s]}`):n[s]=1;const{lastModified:i,lastUpdated:r}=o.props,c={custom:o.custom,config:o.config,position:o.props.position,lastModified:i,lastUpdated:r};if(e){const e=t.values[o.props.id];e&&(l.values[o.props.uri]=e)}return l.scripts[s]=c,{name:`${s}.user.js`,content:a,lastModDate:new Date(r||i)}});o.push({name:"violentmonkey",content:JSON.stringify(l)});const a=await Oa(),s=new a.BlobWriter("application/zip"),i=new a.ZipWriter(s,{bufferedWrite:!0,keepOrder:!1});return await u.all(o.map(e=>i.add(e.name,new a.TextReader(e.content),{lastModDate:e.lastModDate}))),await i.close()}const vs=(0,kt.Z)(ms,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("setting-text"),i=(0,U.up)("icon"),r=(0,U.up)("tooltip"),c=(0,U.up)("setting-check"),u=(0,U.up)("modal");return(0,U.wg)(),(0,U.iD)("div",Qa,[(0,U._)("div",Xa,[(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonExportData")),onClick:t[0]||(t[0]=(...e)=>a.handleExport&&a.handleExport(...e)),disabled:o.exporting},null,8,es),(0,U.Wm)(s,{name:"exportNameTemplate",ref:"tpl","has-reset":"","has-save":!1,rows:1,class:"tpl flex flex-1 center-items ml-1c"},null,512),(0,U.Wm)(r,{content:e.i18n("msgDateFormatInfo",o.dateTokens),placement:"left"},{default:(0,U.w5)(()=>[(0,U._)("a",ts,[(0,U.Wm)(i,{name:"info"})])]),_:1},8,["content"]),(0,U._)("span",{hidden:"",textContent:(0,$.zw)(a.getFileName())},null,8,ns)]),(0,U._)("div",ls,[(0,U.Wm)(c,{name:"exportValues",label:e.i18n("labelExportScriptData")},null,8,["label"])]),o.store.ffDownload?((0,U.wg)(),(0,U.j4)(u,{key:0,transition:"in-out",visible:!!o.store.ffDownload.url,onClose:t[1]||(t[1]=e=>o.store.ffDownload={})},{default:(0,U.w5)(()=>[(0,U._)("div",os,[(0,U._)("a",{download:o.store.ffDownload.name,href:o.store.ffDownload.url},[(0,U.Uk)(" Right click and save as"),ss,is],8,as)])]),_:1},8,["visible"])):(0,U.kq)("",!0)])}]]),ws={class:"mb-1c"},bs=["textContent"],ys={key:0,class:"flex flex-wrap center-items"},xs=["textContent"],Cs=["value"],ks=["textContent","value"],_s=["textContent","disabled"],Ss=["disabled"],zs=["textContent"],Ds={key:1,class:"mt-1c"},Us={class:"sync-server-url"},$s=["textContent"],Rs=["disabled"],Es={class:"mr-2c"},Is=["textContent"],Vs=["disabled"],js={class:"inline-block"},Ws=["textContent"],Ts=["disabled"],Os=["disabled"],Ls=["textContent"],Ms=["textContent","disabled"],As={key:2},Zs="sync.current",Hs={current:""};(0,ce.Z)(Zs,e=>{Hs.current=e||""});const Ps={components:{SettingCheck:me.Z,Icon:he.Z,Tooltip:pe.Z},data:()=>({syncConfig:Hs,store:D}),computed:{syncServices(){const e=this.store.sync;return e&&e.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...e]:null},service(){if(this.syncServices){const e=this.syncConfig.current||"";let t=this.syncServices.find(t=>t.name===e);return t||(console.warn("Invalid current service:",e),t=this.syncServices[0]),t}return null},state(){const{service:e}=this;if(e){const t=["idle","error"].includes(e.syncState)&&["no-auth","unauthorized","error","authorized"].includes(e.authState),n=t&&"authorized"===e.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:t,canSync:n,authType:e.properties.authType,userConfig:e.userConfig||{}}}return null}},methods:{onSaveUserConfig(){(0,y.gj)("SyncSetConfig",this.state.userConfig)},onSyncChange(e){const{value:t}=e.target;k.Z.set(Zs,t)},onAuthorize(){const{service:e}=this;["authorized"].includes(e.authState)?(0,y.gj)("SyncRevoke"):["no-auth","unauthorized","error"].includes(e.authState)&&(0,y.gj)("SyncAuthorize")},onSync(){(0,y.gj)("SyncStart")},getMessage(){const{service:e}=this;if("initializing"===e.authState)return this.i18n("msgSyncInit");if("no-auth"===e.authState)return this.i18n("msgSyncNoAuthYet");if("error"===e.authState)return this.i18n("msgSyncInitError");if("unauthorized"===e.authState)return this.i18n("msgSyncInitError");if("error"===e.syncState)return this.i18n("msgSyncError");if("ready"===e.syncState)return this.i18n("msgSyncReady");if("syncing"===e.syncState){let t="";return e.progress&&e.progress.total&&(t=` (${e.progress.finished}/${e.progress.total})`),this.i18n("msgSyncing")+t}if(e.lastSync){const t=new Date(e.lastSync).toLocaleString();return this.i18n("lastSync",t)}},getLabel(){const{service:e}=this;return"authorizing"===e.authState?this.i18n("labelSyncAuthorizing"):"authorized"===e.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},Ns=(0,kt.Z)(Ps,[["render",(e,t,n,l,o,a)=>{var s,i;const r=(0,U.up)("icon"),c=(0,U.up)("tooltip"),u=(0,U.up)("setting-check");return(0,U.wg)(),(0,U.iD)("section",ws,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelSync"))},null,8,bs),a.state?((0,U.wg)(),(0,U.iD)("div",ys,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelSyncService"))},null,8,xs),(0,U._)("select",{class:"mx-1",value:o.syncConfig.current,onChange:t[0]||(t[0]=(...e)=>a.onSyncChange&&a.onSyncChange(...e))},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(a.syncServices,e=>((0,U.wg)(),(0,U.iD)("option",{key:e.name,textContent:(0,$.zw)(e.displayName),value:e.name},null,8,ks))),128))],40,Cs),a.service.name&&"oauth"===a.state.authType?((0,U.wg)(),(0,U.iD)("button",{key:0,textContent:(0,$.zw)(a.state.label),disabled:!a.state.canAuthorize,onClick:t[1]||(t[1]=(...e)=>a.onAuthorize&&a.onAuthorize(...e))},null,8,_s)):(0,U.kq)("",!0),a.service.name?((0,U.wg)(),(0,U.j4)(c,{key:1,content:e.i18n("labelSync"),class:"stretch-self flex mr-1"},{default:(0,U.w5)(()=>[(0,U._)("button",{disabled:!a.state.canSync,onClick:t[2]||(t[2]=(...e)=>a.onSync&&a.onSync(...e)),class:"flex center-items"},[(0,U.Wm)(r,{name:"refresh"})],8,Ss)]),_:1},8,["content"])):(0,U.kq)("",!0),a.state?((0,U.wg)(),(0,U.iD)("p",{key:2,textContent:(0,$.zw)(a.state.message)},null,8,zs)):(0,U.kq)("",!0)])):(0,U.kq)("",!0),"password"===(null==(s=a.state)?void 0:s.authType)?((0,U.wg)(),(0,U.iD)("fieldset",Ds,[(0,U._)("label",Us,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelSyncServerUrl"))},null,8,$s),(0,U.wy)((0,U._)("input",{type:"url","onUpdate:modelValue":t[3]||(t[3]=e=>a.state.userConfig.serverUrl=e),disabled:!a.state.canAuthorize},null,8,Rs),[[L.nr,a.state.userConfig.serverUrl]])]),(0,U._)("div",Es,[(0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelSyncUsername"))},null,8,Is),(0,U.wy)((0,U._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.state.userConfig.username=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,Vs),[[L.nr,a.state.userConfig.username]])]),(0,U._)("label",js,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelSyncPassword"))},null,8,Ws),(0,U.wy)((0,U._)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>a.state.userConfig.password=e),disabled:!a.state.canAuthorize||a.state.userConfig.anonymous},null,8,Ts),[[L.nr,a.state.userConfig.password]])]),(0,U._)("label",null,[(0,U.wy)((0,U._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>a.state.userConfig.anonymous=e),disabled:!a.state.canAuthorize},null,8,Os),[[L.e8,a.state.userConfig.anonymous]]),(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelSyncAnonymous"))},null,8,Ls)])]),(0,U._)("div",null,[(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonSave")),onClick:t[7]||(t[7]=(0,L.iM)((...e)=>a.onSaveUserConfig&&a.onSaveUserConfig(...e),["prevent"])),disabled:!a.state.canAuthorize},null,8,Ms)])])):(0,U.kq)("",!0),null!=(i=a.service)&&i.name?((0,U.wg)(),(0,U.iD)("div",As,[(0,U.Wm)(u,{name:"syncScriptStatus",label:e.i18n("labelSyncScriptStatus")},null,8,["label"])])):(0,U.kq)("",!0)])}]]),Bs=["textContent"],Fs={class:"mr-1c flex center-items"},Ys=["textContent"],qs=["disabled","title"],Ks=["value","textContent"],Js=["textContent"],Gs=["textContent"],Qs=["href"],Xs=["textContent"],ei=["innerHTML"],ti=["textContent"],ni=["textContent"],li="editorTheme",oi="editorThemeName",ai=["3024-day","3024-night","abbott","abcdef","ambiance-mobile","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","juejin","lesser-dark","liquibyte","lucario","material-darker","material-ocean","material-palenight","material","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"],si="codemirror/CodeMirror",ii=`https://github.com/${si}/tree/master/theme`,ri="default",ci=e=>e?e.split("\n",21).map((e,t)=>(20===t?"...":e.length>100&&`${e.slice(0,100)}...`)||e).join("\n"):null,ui={data:()=>({hint:null,busy:!1,error:null,css:null,theme:null,themes:ai,DEFAULT:ri,ghURL:ii}),components:{SettingText:ds.Z},beforeUnmount(){this.revokers.forEach(e=>e()),this.revokers=null},async mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean),this.revokers||(this.css=ci(k.Z.get(li)),this.revokers=[(0,ce.Z)(oi,e=>{this.theme=null!=e?e:ri})],await k.Z.ready,this.$watch("theme",async e=>{const t=e&&e!==ri&&`https://raw.githubusercontent.com/${si}/master/theme/${e}.css`,n=t&&await this.fetch(t);k.Z.set(oi,!t||n?e:ri),k.Z.set(li,n||""),this.css=ci(n)}))},methods:{async fetch(e,t="text"){const n=document.activeElement;this.busy=!0;try{const l=await(await fetch(e))[t]();return this.error=null,l}catch(e){this.error=e.message||e.code||`${e}`}finally{this.busy=!1,this.$nextTick(()=>null==n?void 0:n.focus())}},onSave(){(0,_.PV)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(e){const t=e.target,{selectionStart:n,selectionEnd:l,value:o}=t,a={false:"true",true:"false"}[o.slice(n,l)];a&&!document.execCommand("insertText",!1,a)&&(t.value=o.slice(0,n)+a+o.slice(l),t.setSelectionRange(n+a.length,n+a.length),t.dispatchEvent(new Event("input")),t.onblur=()=>t.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const e=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],n={};c.entries((0,Zt.Z)({},(await u.resolve().then(m.t.bind(m,4631,23))).default.defaults,(await u.resolve().then(m.bind(m,1181))).default.data().cmDefaults,k.Z.get("editor"))).sort(([e],[t])=>e<t?-1:e>t).filter(([t,n])=>!e.includes(t)&&!s(n)).forEach(([e,t])=>{n[e]=t}),this.hint=JSON.stringify(n,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>t.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},di=(0,kt.Z)(ui,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("setting-text");return(0,U.wg)(),(0,U.iD)("section",null,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelEditor"))},null,8,Bs),(0,U._)("div",Fs,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelTheme"))},null,8,Ys),(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.theme=e),disabled:o.busy,title:o.css},[(0,U._)("option",{value:o.DEFAULT,textContent:(0,$.zw)(e.i18n("labelRunAtDefault"))},null,8,Ks),(0,U._)("option",{value:"",textContent:(0,$.zw)(e.i18n("labelBadgeNone"))},null,8,Js),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(o.themes,e=>((0,U.wg)(),(0,U.iD)("option",{key:e,textContent:(0,$.zw)(e)},null,8,Gs))),128))],8,qs),[[L.bM,o.theme]]),(0,U._)("a",{href:o.ghURL,target:"_blank"},"\u2197",8,Qs),(0,U._)("p",{textContent:(0,$.zw)(o.error)},null,8,Xs)]),(0,U._)("p",{innerHTML:e.i18n("descEditorOptions"),class:"my-1"},null,8,ei),(0,U.Wm)(s,{name:"editor",ref:"editor",json:!0,"has-reset":!0,onSave:a.onSave},{default:(0,U.w5)(()=>[(0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonShowEditorState")),onClick:t[1]||(t[1]=(...e)=>a.toggleStateHint&&a.toggleStateHint(...e))},null,8,ti)]),_:1},8,["onSave"]),(0,U._)("pre",{textContent:(0,$.zw)(o.hint),class:"monospace-font dim-hint"},null,8,ni)])}]]),pi=["textContent"],mi={components:{SettingText:ds.Z},methods:{onSave(){(0,_.PV)({text:this.i18n("msgSavedScriptTemplate")})}}},hi=(0,kt.Z)(mi,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("setting-text");return(0,U.wg)(),(0,U.iD)("section",null,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelScriptTemplate"))},null,8,pi),(0,U.Wm)(s,{name:"scriptTemplate",onSave:a.onSave,"has-reset":""},null,8,["onSave"])])}]]),gi=["textContent"],fi=["textContent"],vi={class:"flex flex-wrap"},wi={key:0,class:"text-red"},bi=["textContent"],yi={components:{SettingText:ds.Z},data:()=>({errors:null}),methods:{onSave(){(0,_.PV)({text:this.i18n("msgSavedBlacklist")})}},async mounted(){this.errors=await(0,y.gj)("Storage",["base","getOne",Un.BZ])}},xi=(0,kt.Z)(yi,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("setting-text");return(0,U.wg)(),(0,U.iD)("section",null,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelBlacklist"))},null,8,gi),(0,U._)("p",null,[(0,U.Uk)((0,$.zw)(e.i18n("descBlacklist"))+" ",1),(0,U._)("a",{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("learnBlacklist"))},null,8,fi)]),(0,U._)("div",vi,[(0,U.Wm)(s,{name:"blacklist",class:"flex-1",onSave:a.onSave,onBgError:t[0]||(t[0]=e=>o.errors=e)},null,8,["onSave"]),o.errors?((0,U.wg)(),(0,U.iD)("ol",wi,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(o.errors,e=>((0,U.wg)(),(0,U.iD)("li",{key:e,textContent:(0,$.zw)(e)},null,8,bi))),128))])):(0,U.kq)("",!0)])])}]]),Ci=["textContent"],ki=["innerHTML"],_i={components:{SettingText:ds.Z},methods:{onSave(){(0,_.PV)({text:this.i18n("msgSavedCustomCSS")})}}},Si=(0,kt.Z)(_i,[["render",(e,t,n,l,o,a)=>{const s=(0,U.up)("setting-text");return(0,U.wg)(),(0,U.iD)("section",null,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelCustomCSS"))},null,8,Ci),(0,U._)("p",{innerHTML:e.i18n("descCustomCSS")},null,8,ki),(0,U.Wm)(s,{name:"customCSS",onSave:a.onSave},null,8,["onSave"])])}]]),zi={badgeColor:(0,y.ag)("titleBadgeColor"),badgeColorBlocked:(0,y.ag)("titleBadgeColorBlocked")},Di=c.keys(zi),Ui={enum:zi,normalize:(e,t)=>/^#[0-9a-f]{6}$/i.test(e)?e:Ta.Z[t]},$i=(0,Zt.Z)({autoUpdate:{normalize:e=>Math.max(0,Math.min(365,+e||0))},defaultInjectInto:{enum:Un.Wg},showAdvanced:{normalize:e=>e},showBadge:{enum:{"":(0,y.ag)("labelBadgeNone"),unique:(0,y.ag)("labelBadgeUnique"),total:(0,y.ag)("labelBadgeTotal")}},"filtersPopup.hideDisabled":{enum:{"":(0,y.ag)("optionPopupShowDisabled"),group:(0,y.ag)("optionPopupGroupDisabled"),hide:(0,y.ag)("optionPopupHideDisabled")}},"filtersPopup.sort":{enum:{exec:(0,y.ag)("filterExecutionOrder"),alpha:(0,y.ag)("filterAlphabeticalOrder")}},uiTheme:{enum:{"":(0,y.ag)("optionUiThemeAuto"),dark:(0,y.ag)("optionUiThemeDark"),light:(0,y.ag)("optionUiThemeLight")}},xhrInject:{normalize:e=>e}},g(ue.Xw,zi,()=>Ui)),Ri=(e,t)=>h($i[t].enum,e)?e:c.keys($i[t].enum)[0],Ei=(e,t)=>(0,y.Ds)((n,l)=>{(n=t(n,e))!==(l=t(l,e))&&k.Z.set(e,n)},50),Ii=(0,S.qj)({}),Vi={components:{VmImport:Ga,VmExport:vs,VmSync:Ns,VmEditor:di,VmTemplate:hi,VmBlacklist:xi,VmCss:Si,SettingCheck:me.Z,LocaleGroup:ge.Z,Tooltip:pe.Z},data:()=>({expose:null,items:$i,settings:Ii}),computed:{editorWindowHint(){var e;return null!=(e=d.windows)&&e.onBoundsChanged?null:this.i18n("optionEditorWindowHint")},isCustomBadgeColor:()=>Di.some(e=>Ii[e]!==Ta.Z[e])},methods:{onResetBadgeColors(){Di.forEach(e=>{Ii[e]=Ta.Z[e]})}},activated(){(0,_.wO)(this.$el)},created(){this.revokers=[],g(ue.LI,$i,([e,{normalize:t=Ri}])=>{this.revokers.push((0,ce.Z)(e,n=>{Ii[e]=t(n,e)})),this.$watch(()=>Ii[e],Ei(e,t))}),this.expose=c.keys(k.Z.get(n)).map(e=>[e,decodeURIComponent(e)]),Oa()},beforeUnmount(){this.revokers.forEach(e=>{e()})}},ji=(0,kt.Z)(Vi,[["render",(e,t)=>{var n;const l=(0,U.up)("setting-check"),o=(0,U.up)("tooltip"),a=(0,U.up)("locale-group"),s=(0,U.up)("vm-import"),i=(0,U.up)("vm-export"),r=(0,U.up)("vm-sync"),c=(0,U.up)("vm-editor"),u=(0,U.up)("vm-template"),d=(0,U.up)("vm-blacklist"),p=(0,U.up)("vm-css");return(0,U.wg)(),(0,U.iD)("div",{class:"tab-settings","data-show-advanced":e.settings.showAdvanced},[(0,U._)("h1",{textContent:(0,$.zw)(e.i18n("labelSettings"))},null,8,Qo),(0,U._)("section",Xo,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("optionPopup"))},null,8,ea),(0,U._)("div",null,[(0,U.Wm)(l,{name:"autoReload",label:e.i18n("labelAutoReloadCurrentTab")},null,8,["label"])]),(0,U._)("div",ta,[(0,U.Wm)(l,{name:"editorWindow",class:"mr-2",ref:"EW"},{default:(0,U.w5)(()=>[(0,U.Wm)(o,{content:e.editorWindowHint,disabled:!e.editorWindowHint},{default:(0,U.w5)(()=>[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("optionEditorWindow"))},null,8,na)]),_:1},8,["content","disabled"])]),_:1},512),(0,U.wy)((0,U.Wm)(l,{name:"editorWindowSimple",label:e.i18n("optionEditorWindowSimple")},null,8,["label"]),[[L.F8,null==(n=e.$refs.EW)?void 0:n.value]])]),(0,U._)("div",la,[(0,U._)("label",null,[(0,U.Wm)(a,{"i18n-key":"labelPopupSort"},{default:(0,U.w5)(()=>[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(["filtersPopup.sort"],t=>(0,U.wy)(((0,U.wg)(),(0,U.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items[t].enum,(e,n)=>((0,U.wg)(),(0,U.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,$.zw)(e)},null,8,aa))),128))],8,oa)),[[L.bM,e.settings[t]]])),128))]),_:1})]),(0,U.wy)((0,U.Wm)(l,{name:"filtersPopup.groupRunAt",label:e.i18n("optionPopupGroupRunAt")},null,8,["label"]),[[L.F8,"exec"===e.settings["filtersPopup.sort"]]]),(0,U._)("label",null,[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(["filtersPopup.hideDisabled"],t=>(0,U.wy)(((0,U.wg)(),(0,U.iD)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items[t].enum,(e,n)=>((0,U.wg)(),(0,U.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,$.zw)(e)},null,8,ia))),128))],8,sa)),[[L.bM,e.settings[t]]])),128))]),(0,U.wy)((0,U.Wm)(l,{name:"filtersPopup.enabledFirst",label:e.i18n("optionPopupEnabledFirst")},null,8,["label"]),[[L.F8,!e.settings["filtersPopup.hideDisabled"]]])]),(0,U._)("div",null,[(0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelBadge"))},null,8,ra),((0,U.wg)(),(0,U.iD)(U.HY,null,(0,U.Ko)(["showBadge"],t=>(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items[t].enum,(e,n)=>((0,U.wg)(),(0,U.iD)("option",{key:`${t}:${n}`,value:n,textContent:(0,$.zw)(e)},null,8,ua))),128))],8,ca),[[L.bM,e.settings[t]]])),64))])]),(0,U._)("div",null,[(0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelBadgeColors"))},null,8,da),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items.badgeColor.enum,(t,n)=>((0,U.wg)(),(0,U.j4)(o,{key:`bc:${n}`,content:t},{default:(0,U.w5)(()=>[(0,U.wy)((0,U._)("input",{type:"color","onUpdate:modelValue":t=>e.settings[n]=t},null,8,pa),[[L.nr,e.settings[n]]])]),_:2},1032,["content"]))),128)),(0,U.wy)((0,U._)("button",{textContent:(0,$.zw)(e.i18n("buttonReset")),class:"ml-1",onClick:t[0]||(t[0]=(...t)=>e.onResetBadgeColors&&e.onResetBadgeColors(...t))},null,8,ma),[[L.F8,e.isCustomBadgeColor]])])])]),(0,U._)("section",ha,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("optionUpdate"))},null,8,ga),(0,U._)("div",fa,[(0,U._)("label",null,[(0,U.Wm)(a,{"i18n-key":"labelAutoUpdate"},{default:(0,U.w5)(()=>[(0,U.wy)((0,U._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.settings.autoUpdate=t),type:"number",min:"0",max:"365",step:"1/"},null,512),[[L.nr,e.settings.autoUpdate]])]),_:1})]),(0,U.Wm)(l,{name:"updateEnabledScriptsOnly",label:e.i18n("labelEnabledScriptsOnly")},null,8,["label"])]),(0,U._)("div",va,[(0,U.Wm)(l,{name:"notifyUpdates",label:e.i18n("labelNotifyUpdates")},null,8,["label"]),(0,U.Wm)(l,{name:"notifyUpdatesGlobal",label:e.i18n("labelNotifyUpdatesGlobal"),class:"ml-2"},null,8,["label"])])]),(0,U._)("section",wa,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelBackup"))},null,8,ba),(0,U.Wm)(s),(0,U.Wm)(i)]),(0,U.Wm)(r),((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)({showAdvanced:e.settings},(t,n)=>((0,U.wg)(),(0,U.iD)("details",{key:n,open:t[n]},[(0,U._)("summary",{onClick:(0,L.iM)(e=>t[n]=!t[n],["prevent"])},[((0,U.wg)(),(0,U.j4)((0,U.LL)(t[n]?"h1":"h3"),{textContent:(0,$.zw)(e.i18n("labelAdvanced")),class:"inline-block"},null,8,["textContent"]))],8,xa),(0,U._)("section",Ca,[(0,U._)("h3",{textContent:(0,$.zw)(e.i18n("labelGeneral"))},null,8,ka),(0,U._)("div",null,[(0,U._)("label",null,[(0,U.Wm)(a,{"i18n-key":"optionUiTheme"},{default:(0,U.w5)(()=>[((0,U.wg)(),(0,U.iD)(U.HY,null,(0,U.Ko)(["uiTheme"],t=>(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items[t].enum,(e,t)=>((0,U.wg)(),(0,U.iD)("option",{key:t,value:t,textContent:(0,$.zw)(e)},null,8,Sa))),128))],8,_a),[[L.bM,e.settings[t]]])),64))]),_:1})])]),(0,U._)("div",za,[(0,U._)("label",null,[(0,U._)("span",{textContent:(0,$.zw)(e.i18n("labelInjectionMode"))},null,8,Da),((0,U.wg)(),(0,U.iD)(U.HY,null,(0,U.Ko)(["defaultInjectInto"],t=>(0,U.wy)((0,U._)("select",{"onUpdate:modelValue":n=>e.settings[t]=n,key:t},[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.items[t].enum,(e,t)=>((0,U.wg)(),(0,U.iD)("option",{key:t,textContent:(0,$.zw)(t)},null,8,$a))),128))],8,Ua),[[L.bM,e.settings[t]]])),64)),(0,U._)("a",{class:"ml-1",href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("learnInjectionMode"))},null,8,Ra)]),(0,U._)("label",null,[(0,U.Wm)(l,{name:"xhrInject"}),(0,U.Wm)(o,{content:e.i18n("labelXhrInjectHint")},{default:(0,U.w5)(()=>[(0,U.Wm)(a,{"i18n-key":"labelXhrInject"},{default:(0,U.w5)(()=>[Ea]),_:1})]),_:1},8,["content"])]),e.settings.xhrInject?(0,U.kq)("",!0):((0,U.wg)(),(0,U.iD)("label",Ia,[(0,U.Wm)(l,{name:"ffInject"}),(0,U.Wm)(o,{content:e.i18n("labelFastFirefoxInjectHint")},{default:(0,U.w5)(()=>[(0,U.Wm)(a,{"i18n-key":"labelFastFirefoxInject"},{default:(0,U.w5)(()=>[Va]),_:1})]),_:1},8,["content"])]))]),(0,U._)("div",null,[(0,U.Wm)(a,{"i18n-key":"labelExposeStatus",class:"mr-1c"},{default:(0,U.w5)(()=>[((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(e.expose,([e,t])=>((0,U.wg)(),(0,U.j4)(l,{key:t,name:`expose.${e}`,class:"mr-1c valign-tb"},{default:(0,U.w5)(()=>[(0,U._)("span",{textContent:(0,$.zw)(t)},null,8,ja),(0,U._)("a",{href:`https://${t}`,target:"_blank",rel:"noopener noreferrer"},"\u2197",8,Wa)]),_:2},1032,["name"]))),128))]),_:2},1024)])]),(0,U.Wm)(c),(0,U.Wm)(u),(0,U.Wm)(d),(0,U.Wm)(p)],8,ya))),128))],8,Go)}]]),Wi={class:"tab-about mb-2c"},Ti={class:"mt-0 mr-1c"},Oi=["textContent"],Li=["textContent"],Mi=["textContent"],Ai=["textContent"],Zi=["textContent"],Hi=["textContent"],Pi=["textContent"],Ni=["textContent"],Bi=["textContent"],Fi=["textContent"],Yi=["textContent"],qi={data:()=>({name:w.name,version:"2.15.0",language:browser.i18n.getUILanguage()}),activated(){(0,_.wO)(this.$el)}},Ki=(0,kt.Z)(qi,[["render",(e,t,n,l,o,a)=>((0,U.wg)(),(0,U.iD)("div",Wi,[(0,U._)("h1",Ti,[(0,U._)("span",{textContent:(0,$.zw)(o.name)},null,8,Oi),(0,U._)("small",{textContent:(0,$.zw)(`v${o.version}`)},null,8,Li)]),(0,U._)("p",{textContent:(0,$.zw)(e.i18n("extDescription"))},null,8,Mi),(0,U._)("div",null,[(0,U._)("label",{textContent:(0,$.zw)(e.i18n("labelRelated"))},null,8,Ai),(0,U._)("ul",null,[(0,U._)("li",null,[(0,U._)("a",{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("labelHomepage"))},null,8,Zi)]),(0,U._)("li",null,[(0,U._)("a",{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("labelFeedback"))},null,8,Hi)]),(0,U._)("li",null,[(0,U._)("a",{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("labelContributors"))},null,8,Pi)]),(0,U._)("li",null,[(0,U._)("a",{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("labelPrivacyPolicy"))},null,8,Ni)])])]),(0,U._)("div",null,[(0,U._)("label",{textContent:(0,$.zw)(e.i18n("labelCurrentLang"))},null,8,Bi),(0,U._)("span",{class:"current",textContent:(0,$.zw)(o.language)},null,8,Fi),(0,U.Uk)(" | "),(0,U._)("a",{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer",textContent:(0,$.zw)(e.i18n("labelHelpTranslate"))},null,8,Yi)])]))]]),Ji="scripts",Gi="about",Qi="recycleBin",Xi=[{name:Ji,comp:Jo,label:(0,y.ag)("sideMenuInstalled")},{name:"settings",comp:ji,label:(0,y.ag)("sideMenuSettings")},{name:Gi,comp:Ki,label:(0,y.ag)("sideMenuAbout")},{name:Qi,comp:Jo,label:(0,y.ag)("buttonRecycleBin")}],er=(0,y.ag)("extName"),tr="!editScript",[nr,lr]=D.route.paths,or=(0,U.Fl)(()=>{const e=D.route.paths[0];return Xi.find(t=>t.name===e)||Xi[0]}),ar=(0,U.Fl)(()=>({[Ji]:D.scripts.length,[Qi]:D.removedScripts.length}));function sr(){const e=or.value.name===Ji,{paths:t}=D.route;O.$J.setContext("editScript",e&&t[1]),O.$J.setContext("tabScripts",e&&!t[1]),O.$J.setContext("showRecycle",or.value.name===Qi)}function ir(e){const n=Xi.indexOf(or.value),l=Xi[(n+e+Xi.length)%Xi.length];t.location.hash=(null==l?void 0:l.name)||""}document.addEventListener("dragover",e=>{var n;["",Gi,Ji].includes(D.route.hash)&&/^application\/(zip|x-zip-compressed)$/.test(null==(n=e.dataTransfer.items[0])?void 0:n.type)&&(t.location.hash="#settings")});const rr={setup(){const e=(0,S.iH)(nr!==Ji||"_new"!==lr&&!Number(lr));return(0,U.m0)(()=>{const{title:e}=D;document.title=e?`${e} - ${er}`:er}),(0,U.YP)(()=>D.route.paths,()=>{e.value=!0,sr()}),(0,U.bv)(()=>{const e=[O.$J.register("a-pageup",()=>ir(-1),{condition:tr}),O.$J.register("a-pagedown",()=>ir(1),{condition:tr})];return O.$J.enable(),sr(),()=>{e.forEach(e=>{e()}),O.$J.disable()}}),{tabs:Xi,current:or,numbers:ar,canRenderAside:e}}},cr=(0,kt.Z)(rr,[["render",(e,t,n,l,o,a)=>((0,U.wg)(),(0,U.iD)("div",R,[l.canRenderAside?((0,U.wg)(),(0,U.iD)("aside",E,[(0,U._)("div",I,[V,(0,U._)("h1",{class:"hidden-sm",textContent:(0,$.zw)(e.i18n("extName"))},null,8,j),W,((0,U.wg)(!0),(0,U.iD)(U.HY,null,(0,U.Ko)(l.tabs,e=>((0,U.wg)(),(0,U.iD)("div",{class:"aside-menu-item",key:e.name},[(0,U._)("a",{href:`#${e.name}`,class:(0,$.C_)({active:e===l.current}),"data-num-scripts":l.numbers[e.name],textContent:(0,$.zw)(e.label)},null,10,T)]))),128))])])):(0,U.kq)("",!0),((0,U.wg)(),(0,U.j4)(U.Ob,null,[((0,U.wg)(),(0,U.j4)((0,U.LL)(l.current.comp),{class:"tab"}))],1024))]))]]),ur=["scripts","sizes"],dr=[(0,y.ag)("editNavCode"),(0,y.ag)("editNavSettings"),(0,y.ag)("editNavValues"),"@require","@resource"];let pr;function mr(e,t){const n=e.meta||{},l=(0,y.iQ)(n,"name"),o=g(y.Hv,[n.name,l,n.description,(0,y.iQ)(n,"description"),e.custom.name,e.custom.description],"\n"),a=e.custom.name||l,s=a.toLowerCase();let i=0,r="";t.forEach((e,t)=>{i+=e,e&&(r+=`${dr[t]}: ${(0,y.aj)(e)}\n`)}),e.$cache={search:o,name:a,lowerName:s,size:(0,y.aj)(i,!0).replace(" ",""),sizes:r.slice(0,-1).replace(/\x20/g,"\xa0").replace(/[^B]$/gm,"$&B"),sizeNum:i},(0,C.d)(e,D,!0)}function hr(){const e=+D.route.paths[1];return gr(e?[e]:null).catch(e&&(()=>gr()))}async function gr(e){const[t]=await u.all([(0,y.gj)("GetData",{ids:e,sizes:!0},{retry:!0}),k.Z.ready]),{scripts:n,sizes:l}=t,o=b(t,ur);c.assign(D,o);const a=[],s=[];n.forEach((e,t)=>{mr(e,l[t]),(e.config.removed?s:a).push(e)}),D.scripts=a,D.removedScripts=s,D.loading=!1}D.loading=!0,hr(),c.assign(x.Z,{ScriptsUpdated(){hr()},UpdateSync(e){D.sync=e},async UpdateScript({update:e,where:t}={}){var n;if(!e)return;(pr||(pr=D.importing)&&(pr=u.race([pr,(0,y.dL)(500)])))&&(await pr,pr=null);const l=D.scripts.findIndex(e=>e.props.id===t.id),o=D.removedScripts.findIndex(e=>e.props.id===t.id),a=D.scripts[l]||D.removedScripts[o];if(!a)return;const[s]=await(0,y.gj)("GetSizes",[t.id]);if(c.assign(a,e),a.error&&!e.error&&(a.error=null),mr(a,s),null!=(null==(n=e.config)?void 0:n.removed)&&(e.config.removed?D.needRefresh=!0:D.removedScripts=D.removedScripts.filter(e=>e.props.id!==t.id)),(a.config.removed?o:l)<0){a.message="";const e=a.config.removed?"removedScripts":"scripts";D[e]=[...D[e],a]}},RemoveScripts(e){D.removedScripts=D.removedScripts.filter(t=>!e.includes(t.props.id))}}),(0,_.sY)(cr)},6291:(e,t,n)=>{var l={"./arrow.svg":7864,"./author.svg":6263,"./code.svg":4237,"./cog.svg":8527,"./command.svg":6337,"./filter.svg":1691,"./home.svg":6447,"./info.svg":6396,"./more.svg":485,"./plus.svg":336,"./question.svg":934,"./refresh.svg":1727,"./search.svg":2574,"./toggle-off.svg":3882,"./toggle-on.svg":6276,"./trash.svg":2981,"./undo.svg":418};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(l,e)){var t=new r("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}o.keys=()=>c.keys(l),o.resolve=a,e.exports=o,o.id=6291},7462:(e,t,n)=>{"use strict";function l(){return l=c.assign?c.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)c.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},l.apply(this,arguments)}n.d(t,{Z:()=>l})}},x={};function C(e){var t=x[e];if(void 0!==t)return t.exports;var n=x[e]={exports:{}};return y[e].call(n.exports,n,n.exports,C),n.exports}C.m=y,a=[],C.O=(e,t,n,l)=>{if(!t){var o=1/0;for(u=0;u<a.length;u++){for(var[t,n,l]=a[u],s=!0,i=0;i<t.length;i++)(!1&l||o>=l)&&c.keys(C.O).every(e=>C.O[e](t[i]))?t.splice(i--,1):(s=!1,l<o&&(o=l));if(s){a.splice(u--,1);var r=n();void 0!==r&&(e=r)}}return e}l=l||0;for(var u=a.length;u>0&&a[u-1][2]>l;u--)a[u]=a[u-1];a[u]=[t,n,l]},C.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return C.d(t,{a:t}),t},b=c.getPrototypeOf?e=>c.getPrototypeOf(e):e=>e.__proto__,C.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=c.create(null);C.r(n);var l={};m=m||[null,b({}),b([]),b(b)];for(var o=2&t&&e;"object"==typeof o&&!~m.indexOf(o);o=b(o))c.getOwnPropertyNames(o).forEach(t=>l[t]=()=>e[t]);return l.default=()=>e,C.d(n,l),n},C.d=(e,t)=>{for(var n in t)C.o(t,n)&&!C.o(e,n)&&c.defineProperty(e,n,{enumerable:!0,get:t[n]})},C.o=(e,t)=>c.prototype.hasOwnProperty.call(e,t),C.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&c.defineProperty(e,Symbol.toStringTag,{value:"Module"}),c.defineProperty(e,"__esModule",{value:!0})},C.j=360,(()=>{var e={360:0};C.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[a,s,i]=n,r=0;if(a.some(t=>0!==e[t])){for(l in s)C.o(s,l)&&(C.m[l]=s[l]);if(i)var c=i(C)}for(t&&t(n);r<a.length;r++)o=a[r],C.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return C.O(c)},n=self.webpackChunkviolentmonkey=self.webpackChunkviolentmonkey||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var k=C.O(void 0,[386,84],()=>C(8993));k=C.O(k)})()}